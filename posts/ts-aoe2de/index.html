<!doctype html>
<html lang="en-us">
  <head>
    <title>Updating Trigger Studio for Age of Empires II: DE // Bodacious Blog</title>
    <meta charset="utf-8" />
    <meta name="generator" content="Hugo 0.59.0-DEV" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="author" content="John Doe" />
    <meta name="description" content="" />
    <link rel="stylesheet" href="https://mullikine.github.io/css/main.min.9200f15e5b522081b40b32c05f72d83bb782a224350597f86f00e6730c54d6ca.css" />

    
    <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Updating Trigger Studio for Age of Empires II: DE"/>
<meta name="twitter:description" content="Set up VS2005 on XP I&rsquo;m using VS2005 for the maximum compatibility.
  Class diagram of TS 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52  n17 [label=&#34;{LinkList|- _head\l- _tail\l| clear()\l getById()\l getByIdSafe()\l head()\l pop()\l push_back()\l}&#34; style=filled fillcolor=&#34;#ffffff&#34; shape=&#34;record&#34;]; n19 [label=&#34;{MapCopyCache|&#43; source\l&#43; source\l&#43; unitcount\l&#43; unitcount\l&#43; units\l&#43; units\l|}&#34; style=filled fillcolor=&#34;#ffffff&#34; shape=&#34;record&#34;]; n41 [label=&#34;{playersunit_ucnst_equals|- _cnst\l|}&#34; style=filled fillcolor=&#34;#ffffff&#34; shape=&#34;record&#34;]; n42 [label=&#34;{playersunit_ucnst_notequals|- _cnst\l|}&#34; style=filled fillcolor=&#34;#ffffff&#34; shape=&#34;record&#34;]; n3 [label=&#34;{Campaign|&#43; header\l| open()\l reset()\l}&#34; style=filled fillcolor=&#34;#ffffff&#34; shape=&#34;record&#34;]; n11 [label=&#34;{EditEC|&#43; index\l&#43; mapview\l&#43; parent\l&#43; players\l&#43; trigindex\l&#43; user\l|}&#34; style=filled fillcolor=&#34;#ffffff&#34; shape=&#34;record&#34;]; n30 [label=&#34;{TrigXmlVisitor|- _ss\l- _trigcount\l| visit()\l visitEnd()\l}&#34; style=filled fillcolor=&#34;#ffffff&#34; shape=&#34;record&#34;]; n44 [label=&#34;{uid_equals|- _uid\l|}&#34; style=filled fillcolor=&#34;#ffffff&#34; shape=&#34;record&#34;]; n45 [label=&#34;{unit_in_area|- _area\l|}&#34; style=filled fillcolor=&#34;#ffffff&#34; shape=&#34;record&#34;]; n8 [label=&#34;{ECBase|&#43; GAIA_INDEX\l&#43; ectype\l&#43; parent_trigger_id\l&#43; size\l&#43; type\l|}&#34; style=filled fillcolor=&#34;#ffffff&#34; shape=&#34;record&#34;]; n14 [label=&#34;{EffectItemData|&#43; editor\l&#43; treeitem\l&#43; trig_index\l| Copy()\l Delete()\l DuplicatePlayers()\l GetEffect()\l GetName()\l&#43; GetTrigger()\l ModifyIndex()\l OpenEditor()\l}&#34; style=filled fillcolor=&#34;#ffffff&#34; shape=&#34;record&#34;]; n37 [label=&#34;{get_ec_player|- _player\l|&#43; player()\l}&#34; style=filled fillcolor=&#34;#ffffff&#34; shape=&#34;record&#34;]; n40 [label=&#34;{players||}&#34; style=filled fillcolor=&#34;#ffffff&#34; shape=&#34;record&#34;]; n43 [label=&#34;{send_visitor|- _tv\l|}&#34; style=filled fillcolor=&#34;#ffffff&#34; shape=&#34;record&#34;]; n28 [label=&#34;{TrigScrawlVisitor|- _ss\l- _trigcount\l| visit()\l visitEnd()\l}&#34; style=filled fillcolor=&#34;#ffffff&#34; shape=&#34;record&#34;]; n34 [label=&#34;{UnitGroupLink|&#43; count\l&#43; list\l|}&#34; style=filled fillcolor=&#34;#ffffff&#34; shape=&#34;record&#34;]; n22 [label=&#34;{Player|&#43; age\l&#43; ai\l&#43; aifile\l&#43; aimode\l&#43; avictory\l&#43; camera\l&#43; civ\l&#43; color\l&#43; cty\l&#43; ctyfile\l&#43; diplomacy\l&#43; dis_bldg\l&#43; dis_tech\l&#43; dis_unit\l&#43; enable\l&#43; ending_age\l&#43; human\l&#43; name\l names\l&#43; names\l&#43; ndis_b\l&#43; ndis_t\l&#43; ndis_u\l num_players\l&#43; num_players\l&#43; player_number\l&#43; pop\l&#43; resources\l&#43; stable\l&#43; u1\l&#43; u2\l&#43; ucount\l&#43; units\l&#43; vc\l&#43; vcfile\l| add_unit()\l change_unit_type_for_all_of_type()\l clear_ai()\l clear_cty()\l clear_vc()\l erase_unit()\l erase_unit_area()\l erase_unit_type()\l export_ai()\l export_cty()\l export_vc()\l find_unit()\l import_ai()\l import_cty()\l import_vc()\l read_age()\l read_aifiles()\l read_aimode()\l read_camera_longs()\l read_data1()\l read_data3()\l read_data4()\l read_diplomacy()\l read_dis_bldgs()\l read_dis_techs()\l read_dis_units()\l read_header_name()\l read_header_stable()\l read_ndis_bldgs()\l read_ndis_techs()\l read_ndis_units()\l read_player_number()\l read_resources()\l read_units()\l reset()\l write_data1()\l write_data3()\l write_header_name()\l write_header_stable()\l write_no_units()\l write_units()\l}&#34; style=filled fillcolor=&#34;#ffffff&#34; shape=&#34;record&#34;]; n26 [label=&#34;{Setts|&#43; BasePath\l&#43; DelTempOnExit\l&#43; ScenPath\l&#43; TempPath\l&#43; asktoconverteffects\l&#43; disabletips\l&#43; displayhints\l&#43; drawconds\l&#43; draweffects\l&#43; drawelevation\l&#43; drawlocations\l&#43; drawplayer\l&#43; drawterrain\l&#43; editall\l&#43; forceenabletips\l&#43; intense\l&#43; logname\l&#43; nowarnings\l- path\l- recent\l&#43; recent_first\l- recent_used\l&#43; showdisplayorder\l&#43; showtrigfunction\l&#43; showtrigids\l&#43; showtrignames\l&#43; warnbits\l&#43; zoom\l| load()\l read_recent()\l recent_getnext()\l recent_push()\l write_recent()\l}&#34; style=filled fillcolor=&#34;#ffffff&#34; shape=&#34;record&#34;]; n6 [label=&#34;{Condition|&#43; NUM_CONDITIONS_AOF4\l&#43; NUM_CONDITIONS_AOHD4\l&#43; NUM_CONDITIONS_AOK\l&#43; NUM_CONDITIONS_CC\l&#43; NUM_CONDITIONS_SWGB\l&#43; NUM_TAUNT_SETS\l&#43; NUM_VIRTUAL_CONDITIONS_AOC\l&#43; NUM_VIRTUAL_CONDITIONS_AOF\l&#43; NUM_VIRTUAL_CONDITIONS_AOHD\l&#43; NUM_VIRTUAL_CONDITIONS_AOK\l&#43; NUM_VIRTUAL_CONDITIONS_CC\l&#43; NUM_VIRTUAL_CONDITIONS_SWGB\l&#43; NUM_VIRTUAL_CONDITIONS_UP\l&#43; ai_signal\l&#43; amount\l&#43; area\l defaultvals\l&#43; defaultvals\l&#43; group\l&#43; object\l&#43; pTech\l&#43; pUnit\l&#43; player\l&#43; res_type\l&#43; reserved\l&#43; reverse_hd\l taunt_set\l&#43; taunt_set\l&#43; tech_cnst\l&#43; timer\l types\l&#43; types\l types_aok\l&#43; types_aok\l types_cc\l&#43; types_cc\l types_short\l&#43; types_short\l types_short_aok\l&#43; types_short_aok\l types_short_cc\l&#43; types_short_cc\l types_short_swgb\l&#43; types_short_swgb\l types_swgb\l&#43; types_swgb\l&#43; u_loc\l&#43; unit_cnst\l&#43; unknown2\l&#43; utype\l- valid_since_last_check\l virtual_types\l&#43; virtual_types\l virtual_types_aoc\l&#43; virtual_types_aoc\l virtual_types_aof\l&#43; virtual_types_aof\l virtual_types_aohd\l&#43; virtual_types_aohd\l virtual_types_aok\l&#43; virtual_types_aok\l virtual_types_cc\l&#43; virtual_types_cc\l virtual_types_swgb\l&#43; virtual_types_swgb\l virtual_types_up\l&#43; virtual_types_up\l| accept()\l areaName()\l check()\l check_and_save()\l compress()\l getName()\l getPlayer()\l get_valid_since_last_check()\l null_location_unit()\l null_object()\l read()\l selectedUnits()\l setPlayer()\l tobuffer()\l valid_area()\l valid_area_location()\l valid_full_map()\l valid_location_unit()\l valid_object()\l valid_partial_map()\l valid_player()\l valid_technology_spec()\l valid_unit_spec()\l write()\l}&#34; style=filled fillcolor=&#34;#ffffff&#34; shape=&#34;record&#34;]; n7 [label=&#34;{ConditionItemData|&#43; editor\l&#43; treeitem\l&#43; trig_index\l| Copy()\l Delete()\l DuplicatePlayers()\l GetCondition()\l GetName()\l&#43; GetTrigger()\l ModifyIndex()\l OpenEditor()\l}&#34; style=filled fillcolor=&#34;#ffffff&#34; shape=&#34;record&#34;]; n38 [label=&#34;{io_error||}&#34; style=filled fillcolor=&#34;#ffffff&#34; shape=&#34;record&#34;]; n39 [label=&#34;{p||}&#34; style=filled fillcolor=&#34;#ffffff&#34; shape=&#34;record&#34;]; n47 [label=&#34;{unit_in_rect|- _rect\l- _rect\l|}&#34; style=filled fillcolor=&#34;#ffffff&#34; shape=&#34;record&#34;]; n5 [label=&#34;{ColorLink|&#43; ref\l|}&#34; style=filled fillcolor=&#34;#ffffff&#34; shape=&#34;record&#34;]; n20 [label=&#34;{MemBuffer|- blen\l- buffer\l- mine\l- pos\l- writeable\l| checkFits()\l fill()\l&#43; get()\l read()\l reads()\l skip()\l write()\l writes()\l}&#34; style=filled fillcolor=&#34;#ffffff&#34; shape=&#34;record&#34;]; n15 [label=&#34;{ItemData|&#43; index\l&#43; type\l| Copy()\l Delete()\l DuplicatePlayers()\l GetName()\l&#43; GetTrigger()\l ModifyIndex()\l OpenEditor()\l}&#34; style=filled fillcolor=&#34;#ffffff&#34; shape=&#34;record&#34;]; n16 [label=&#34;{Link|- _id\l- _name\l&#43; _next\l| id()\l name()\l next()\l read()\l setNext()\l}&#34; style=filled fillcolor=&#34;#ffffff&#34; shape=&#34;record&#34;]; n21 [label=&#34;{NullBuffer|- _size\l| fill()\l read()\l reads()\l size()\l skip()\l write()\l writes()\l}&#34; style=filled fillcolor=&#34;#ffffff&#34; shape=&#34;record&#34;]; n24 [label=&#34;{SVector|- begin\l- end\l- next\l- realloc_flag\l|&#43; allocate()\l&#43; append()\l&#43; at()\l&#43; clear()\l- copy()\l&#43; count()\l- expand()\l&#43; first()\l&#43; insert()\l&#43; last()\l&#43; remove()\l}&#34; style=filled fillcolor=&#34;#ffffff&#34; shape=&#34;record&#34;]; n25 [label=&#34;{Scenario|&#43; OUTOFBOUNDS\l StandardAI\l&#43; StandardAI\l StandardAI2\l&#43; StandardAI2\l&#43; TEMPTERRAIN\l&#43; TEMPTERRAIN2\l&#43; all_techs\l&#43; bBitmap\l&#43; bitmap\l&#43; cFiles\l&#43; cinem\l&#43; editor_pos\l&#43; files\l&#43; game\l&#43; header\l&#43; lock_teams\l&#43; map\l&#43; max_teams\l&#43; messages\l- mod_status\l&#43; msg\l&#43; mstrings\l&#43; next_uid\l&#43; objstate\l&#43; origname\l&#43; pergame\l&#43; perversion\l pgAOC\l&#43; pgAOC\l pgAOE\l&#43; pgAOE\l pgAOF\l&#43; pgAOF\l pgAOF4\l&#43; pgAOF4\l pgAOF6\l&#43; pgAOF6\l pgAOHD\l&#43; pgAOHD\l pgAOHD4\l&#43; pgAOHD4\l pgAOHD6\l&#43; pgAOHD6\l pgAOK\l&#43; pgAOK\l&#43; pgGame\l pgSWGB\l&#43; pgSWGB\l pgSWGBCC\l&#43; pgSWGBCC\l pgUP\l&#43; pgUP\l&#43; player_choose_teams\l&#43; players\l pv1_15\l&#43; pv1_15\l pv1_18\l&#43; pv1_18\l&#43; pv1_21\l pv1_22\l&#43; pv1_22\l pv1_23\l&#43; pv1_23\l pv1_24\l&#43; pv1_24\l pv1_26\l&#43; pv1_26\l pv1_30\l&#43; pv1_30\l&#43; random_start_points\l- sect\l&#43; t_order\l&#43; triggers\l&#43; trigver\l&#43; unk3\l&#43; unk4\l&#43; unknown\l&#43; ver1\l&#43; ver2\l&#43; version2\l&#43; vict\l| AOKBMP()\l accept()\l adapt_game()\l add_activation()\l aoc_to_aok()\l aoc_to_hd4()\l aoc_to_hd6()\l aohd_to_hd6()\l aok_to_aoc()\l auto_upgrade_hd4()\l auto_upgrade_hd6()\l change_unit_type_for_all_of_type()\l clean_format()\l clean_triggers()\l clearaicpvc()\l compress_unit_ids()\l datasetRequired()\l delete_player_units()\l delete_triggers()\l duplicate_triggers()\l exFile()\l expansionsRequired()\l export_bmp()\l fix_t_order()\l fix_trigger_outliers()\l floodFill4()\l floodFillElev4()\l getPlayerCount()\l get_number_active_players()\l hd4_to_hd6()\l hd_to_10c()\l hd_to_swgb()\l hd_to_up()\l insert_trigger()\l instructions_panel_set()\l instructions_sound_id_set()\l instructions_sound_text_set()\l instructions_string_reset()\l instructions_string_zero()\l isTerrainEdge()\l is_userpatch()\l map_change_elevation()\l map_copy()\l map_delete()\l map_duplicate()\l map_move()\l map_paste()\l map_repeat()\l map_scale()\l map_size()\l map_swap()\l move_triggers()\l&#43; needsave()\l next_sect()\l open()\l outline()\l outlineDraw()\l prefix_display_order()\l randomize_unit_frames()\l read()\l read_data()\l remove_display_order_prefix()\l remove_trigger_descriptions()\l remove_trigger_names()\l requireDataset()\l reset()\l save()\l save_pseudonyms()\l set_number_active_players()\l set_unit_z_to_map_elev()\l sort_conds_effects()\l strip_patch4()\l strip_patch6()\l swapTerrain()\l swap_players()\l swap_trigger_names_descriptions()\l swap_triggers()\l sync_triggers()\l toFile()\l unrequireDataset()\l up_to_10c()\l up_to_aofe()\l up_to_hd()\l up_to_swgb()\l water_cliffs_visibility()\l write()\l write_data()\l}&#34; style=filled fillcolor=&#34;#ffffff&#34; shape=&#34;record&#34;]; n4 [label=&#34;{ChangePlayerVisitor|- _player\l| visit()\l}&#34; style=filled fillcolor=&#34;#ffffff&#34; shape=&#34;record&#34;]; n9 [label=&#34;{ESDATA|- aitype_count\l&#43; aitypes\l- civ_count\l&#43; civs\l- color_count\l&#43; colors\l pfuncs\l- pfuncs\l- res_count\l&#43; resources\l- rstate\l- tech_count\l&#43; techs\l- terrain_count\l&#43; terrains\l&#43; ug_buildings\l&#43; ug_units\l- unit_count\l- unitgroup_count\l&#43; unitgroups\l&#43; units\l| endResources()\l getCount()\l load()\l readAitypes()\l readCiv()\l readColor()\l readResources()\l readSimple()\l readTech()\l readTerrain()\l readUnit()\l readUnitGroup()\l}&#34; style=filled fillcolor=&#34;#ffffff&#34; shape=&#34;record&#34;]; n12 [label=&#34;{EditEffect|&#43; N_CONTROLS\l&#43; TrigCallback\l&#43; e\l| update()\l}&#34; style=filled fillcolor=&#34;#ffffff&#34; shape=&#34;record&#34;]; n23 [label=&#34;{SString|- data\l- len\l null\l- null\l|&#43; c_str()\l erase()\l&#43; length()\l lock()\l&#43; lwn()\l put()\l read()\l set()\l&#43; total_size()\l unlock()\l write()\l}&#34; style=filled fillcolor=&#34;#ffffff&#34; shape=&#34;record&#34;]; n29 [label=&#34;{TrigXmlReader|| read()\l}&#34; style=filled fillcolor=&#34;#ffffff&#34; shape=&#34;record&#34;]; n31 [label=&#34;{Trigger|&#43; conds\l&#43; description\l&#43; display_order\l&#43; effects\l&#43; id\l&#43; loop\l&#43; name\l&#43; obj\l&#43; obj_order\l&#43; obj_str_id\l&#43; state\l&#43; u1\l| accept()\l getIDName()\l getName()\l get_player()\l read()\l sort_conditions()\l sort_effects()\l tobuffer()\l write()\l}&#34; style=filled fillcolor=&#34;#ffffff&#34; shape=&#34;record&#34;]; n32 [label=&#34;{TriggerVisitor||&#43; visitEnd()\l}&#34; style=filled fillcolor=&#34;#ffffff&#34; shape=&#34;record&#34;]; n33 [label=&#34;{Unit|- cnst\l&#43; frame\l&#43; garrison\l&#43; ident\l- pType\l&#43; rotate\l size\l&#43; size\l&#43; state\l&#43; x\l&#43; y\l&#43; z\l| getType()\l getTypeID()\l read()\l setType()\l toBuffer()\l}&#34; style=filled fillcolor=&#34;#ffffff&#34; shape=&#34;record&#34;]; n1 [label=&#34;{AutoFile|- _file\l| close()\l get()\l}&#34; style=filled fillcolor=&#34;#ffffff&#34; shape=&#34;record&#34;]; n10 [label=&#34;{EditCondition|&#43; N_CONTROLS\l&#43; c\l| update()\l}&#34; style=filled fillcolor=&#34;#ffffff&#34; shape=&#34;record&#34;]; n48 [label=&#34;{unit_is_type|- _type\l|}&#34; style=filled fillcolor=&#34;#ffffff&#34; shape=&#34;record&#34;]; n35 [label=&#34;{UnitLink|&#43; hp\l|}&#34; style=filled fillcolor=&#34;#ffffff&#34; shape=&#34;record&#34;]; n36 [label=&#34;{bad_data_error||}&#34; style=filled fillcolor=&#34;#ffffff&#34; shape=&#34;record&#34;]; n27 [label=&#34;{TechLink|&#43; civ\l|}&#34; style=filled fillcolor=&#34;#ffffff&#34; shape=&#34;record&#34;]; n2 [label=&#34;{Buffer||}&#34; style=filled fillcolor=&#34;#ffffff&#34; shape=&#34;record&#34;]; n13 [label=&#34;{Effect|&#43; NUM_EFFECTS_AOC\l&#43; NUM_EFFECTS_AOF\l&#43; NUM_EFFECTS_AOF4\l&#43; NUM_EFFECTS_AOF6\l&#43; NUM_EFFECTS_AOHD\l&#43; NUM_EFFECTS_AOHD4\l&#43; NUM_EFFECTS_AOHD6\l&#43; NUM_EFFECTS_AOK\l&#43; NUM_EFFECTS_CC\l&#43; NUM_EFFECTS_SWGB\l&#43; NUM_EFFECTS_UP\l&#43; NUM_VIRTUAL_EFFECTS_AOC\l&#43; NUM_VIRTUAL_EFFECTS_AOF\l&#43; NUM_VIRTUAL_EFFECTS_AOHD\l&#43; NUM_VIRTUAL_EFFECTS_AOK\l&#43; NUM_VIRTUAL_EFFECTS_CC\l&#43; NUM_VIRTUAL_EFFECTS_SWGB\l&#43; NUM_VIRTUAL_EFFECTS_UP\l&#43; ai_goal\l&#43; amount\l&#43; area\l defaultvals\l&#43; defaultvals\l&#43; diplomacy\l&#43; disp_time\l&#43; group\l&#43; location\l&#43; num_sel\l&#43; pTech\l&#43; pUnit\l&#43; panel\l&#43; res_type\l&#43; s_player\l&#43; sound\l&#43; soundid\l&#43; stance\l&#43; t_player\l&#43; tech_cnst\l&#43; text\l&#43; textid\l&#43; trig_index\l types\l&#43; types\l types_aoc\l&#43; types_aoc\l types_aof\l&#43; types_aof\l types_aohd\l&#43; types_aohd\l types_aok\l&#43; types_aok\l types_cc\l&#43; types_cc\l types_short\l&#43; types_short\l types_short_aoc\l&#43; types_short_aoc\l types_short_aof\l&#43; types_short_aof\l types_short_aohd\l&#43; types_short_aohd\l types_short_aok\l&#43; types_short_aok\l types_short_cc\l&#43; types_short_cc\l types_short_swgb\l&#43; types_short_swgb\l types_short_up\l&#43; types_short_up\l types_swgb\l&#43; types_swgb\l types_up\l&#43; types_up\l&#43; uid_loc\l&#43; uids\l&#43; unit_cnst\l&#43; utype\l- valid_since_last_check\l virtual_types\l&#43; virtual_types\l virtual_types_aoc\l&#43; virtual_types_aoc\l virtual_types_aof\l&#43; virtual_types_aof\l virtual_types_aohd\l&#43; virtual_types_aohd\l virtual_types_aok\l&#43; virtual_types_aok\l virtual_types_cc\l&#43; virtual_types_cc\l virtual_types_swgb\l&#43; virtual_types_swgb\l virtual_types_up\l&#43; virtual_types_up\l| accept()\l areaName()\l check()\l check_and_save()\l compress()\l getName()\l getPlayer()\l getTypeName()\l get_valid_since_last_check()\l has_selected()\l has_unit_constant()\l isCeilAmount()\l isFloorAmount()\l null_location_unit()\l read()\l selectedUnits()\l setPlayer()\l tobuffer()\l valid_area()\l valid_area_location()\l valid_destination()\l valid_full_map()\l valid_location_coord()\l valid_location_unit()\l valid_panel()\l valid_partial_map()\l valid_points()\l valid_selected()\l valid_source_player()\l valid_target_player()\l valid_technology_spec()\l valid_trigger()\l valid_unit_constant()\l valid_unit_spec()\l write()\l}&#34; style=filled fillcolor=&#34;#ffffff&#34; shape=&#34;record&#34;]; { n21 n20 } -&gt; n2 [arrowhead=&#34;empty&#34;]; { n10 n12 } -&gt; n11 [arrowhead=&#34;empty&#34;]; { n35 n27 n34 n5 } -&gt; n16 [arrowhead=&#34;empty&#34;]; { n13 n6 } -&gt; n8 [arrowhead=&#34;empty&#34;]; { n14 n7 } -&gt; n15 [arrowhead=&#34;empty&#34;]; { n4 n30 n28 } -&gt; n32 [arrowhead=&#34;empty&#34;];     Try opening a scenario saved from DE I receive this error 1 2 3 4 5 6 7 8  Failed to open as The Conquerors scenario file."/>

    <meta property="og:title" content="Updating Trigger Studio for Age of Empires II: DE" />
<meta property="og:description" content="Set up VS2005 on XP I&rsquo;m using VS2005 for the maximum compatibility.
  Class diagram of TS 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52  n17 [label=&#34;{LinkList|- _head\l- _tail\l| clear()\l getById()\l getByIdSafe()\l head()\l pop()\l push_back()\l}&#34; style=filled fillcolor=&#34;#ffffff&#34; shape=&#34;record&#34;]; n19 [label=&#34;{MapCopyCache|&#43; source\l&#43; source\l&#43; unitcount\l&#43; unitcount\l&#43; units\l&#43; units\l|}&#34; style=filled fillcolor=&#34;#ffffff&#34; shape=&#34;record&#34;]; n41 [label=&#34;{playersunit_ucnst_equals|- _cnst\l|}&#34; style=filled fillcolor=&#34;#ffffff&#34; shape=&#34;record&#34;]; n42 [label=&#34;{playersunit_ucnst_notequals|- _cnst\l|}&#34; style=filled fillcolor=&#34;#ffffff&#34; shape=&#34;record&#34;]; n3 [label=&#34;{Campaign|&#43; header\l| open()\l reset()\l}&#34; style=filled fillcolor=&#34;#ffffff&#34; shape=&#34;record&#34;]; n11 [label=&#34;{EditEC|&#43; index\l&#43; mapview\l&#43; parent\l&#43; players\l&#43; trigindex\l&#43; user\l|}&#34; style=filled fillcolor=&#34;#ffffff&#34; shape=&#34;record&#34;]; n30 [label=&#34;{TrigXmlVisitor|- _ss\l- _trigcount\l| visit()\l visitEnd()\l}&#34; style=filled fillcolor=&#34;#ffffff&#34; shape=&#34;record&#34;]; n44 [label=&#34;{uid_equals|- _uid\l|}&#34; style=filled fillcolor=&#34;#ffffff&#34; shape=&#34;record&#34;]; n45 [label=&#34;{unit_in_area|- _area\l|}&#34; style=filled fillcolor=&#34;#ffffff&#34; shape=&#34;record&#34;]; n8 [label=&#34;{ECBase|&#43; GAIA_INDEX\l&#43; ectype\l&#43; parent_trigger_id\l&#43; size\l&#43; type\l|}&#34; style=filled fillcolor=&#34;#ffffff&#34; shape=&#34;record&#34;]; n14 [label=&#34;{EffectItemData|&#43; editor\l&#43; treeitem\l&#43; trig_index\l| Copy()\l Delete()\l DuplicatePlayers()\l GetEffect()\l GetName()\l&#43; GetTrigger()\l ModifyIndex()\l OpenEditor()\l}&#34; style=filled fillcolor=&#34;#ffffff&#34; shape=&#34;record&#34;]; n37 [label=&#34;{get_ec_player|- _player\l|&#43; player()\l}&#34; style=filled fillcolor=&#34;#ffffff&#34; shape=&#34;record&#34;]; n40 [label=&#34;{players||}&#34; style=filled fillcolor=&#34;#ffffff&#34; shape=&#34;record&#34;]; n43 [label=&#34;{send_visitor|- _tv\l|}&#34; style=filled fillcolor=&#34;#ffffff&#34; shape=&#34;record&#34;]; n28 [label=&#34;{TrigScrawlVisitor|- _ss\l- _trigcount\l| visit()\l visitEnd()\l}&#34; style=filled fillcolor=&#34;#ffffff&#34; shape=&#34;record&#34;]; n34 [label=&#34;{UnitGroupLink|&#43; count\l&#43; list\l|}&#34; style=filled fillcolor=&#34;#ffffff&#34; shape=&#34;record&#34;]; n22 [label=&#34;{Player|&#43; age\l&#43; ai\l&#43; aifile\l&#43; aimode\l&#43; avictory\l&#43; camera\l&#43; civ\l&#43; color\l&#43; cty\l&#43; ctyfile\l&#43; diplomacy\l&#43; dis_bldg\l&#43; dis_tech\l&#43; dis_unit\l&#43; enable\l&#43; ending_age\l&#43; human\l&#43; name\l names\l&#43; names\l&#43; ndis_b\l&#43; ndis_t\l&#43; ndis_u\l num_players\l&#43; num_players\l&#43; player_number\l&#43; pop\l&#43; resources\l&#43; stable\l&#43; u1\l&#43; u2\l&#43; ucount\l&#43; units\l&#43; vc\l&#43; vcfile\l| add_unit()\l change_unit_type_for_all_of_type()\l clear_ai()\l clear_cty()\l clear_vc()\l erase_unit()\l erase_unit_area()\l erase_unit_type()\l export_ai()\l export_cty()\l export_vc()\l find_unit()\l import_ai()\l import_cty()\l import_vc()\l read_age()\l read_aifiles()\l read_aimode()\l read_camera_longs()\l read_data1()\l read_data3()\l read_data4()\l read_diplomacy()\l read_dis_bldgs()\l read_dis_techs()\l read_dis_units()\l read_header_name()\l read_header_stable()\l read_ndis_bldgs()\l read_ndis_techs()\l read_ndis_units()\l read_player_number()\l read_resources()\l read_units()\l reset()\l write_data1()\l write_data3()\l write_header_name()\l write_header_stable()\l write_no_units()\l write_units()\l}&#34; style=filled fillcolor=&#34;#ffffff&#34; shape=&#34;record&#34;]; n26 [label=&#34;{Setts|&#43; BasePath\l&#43; DelTempOnExit\l&#43; ScenPath\l&#43; TempPath\l&#43; asktoconverteffects\l&#43; disabletips\l&#43; displayhints\l&#43; drawconds\l&#43; draweffects\l&#43; drawelevation\l&#43; drawlocations\l&#43; drawplayer\l&#43; drawterrain\l&#43; editall\l&#43; forceenabletips\l&#43; intense\l&#43; logname\l&#43; nowarnings\l- path\l- recent\l&#43; recent_first\l- recent_used\l&#43; showdisplayorder\l&#43; showtrigfunction\l&#43; showtrigids\l&#43; showtrignames\l&#43; warnbits\l&#43; zoom\l| load()\l read_recent()\l recent_getnext()\l recent_push()\l write_recent()\l}&#34; style=filled fillcolor=&#34;#ffffff&#34; shape=&#34;record&#34;]; n6 [label=&#34;{Condition|&#43; NUM_CONDITIONS_AOF4\l&#43; NUM_CONDITIONS_AOHD4\l&#43; NUM_CONDITIONS_AOK\l&#43; NUM_CONDITIONS_CC\l&#43; NUM_CONDITIONS_SWGB\l&#43; NUM_TAUNT_SETS\l&#43; NUM_VIRTUAL_CONDITIONS_AOC\l&#43; NUM_VIRTUAL_CONDITIONS_AOF\l&#43; NUM_VIRTUAL_CONDITIONS_AOHD\l&#43; NUM_VIRTUAL_CONDITIONS_AOK\l&#43; NUM_VIRTUAL_CONDITIONS_CC\l&#43; NUM_VIRTUAL_CONDITIONS_SWGB\l&#43; NUM_VIRTUAL_CONDITIONS_UP\l&#43; ai_signal\l&#43; amount\l&#43; area\l defaultvals\l&#43; defaultvals\l&#43; group\l&#43; object\l&#43; pTech\l&#43; pUnit\l&#43; player\l&#43; res_type\l&#43; reserved\l&#43; reverse_hd\l taunt_set\l&#43; taunt_set\l&#43; tech_cnst\l&#43; timer\l types\l&#43; types\l types_aok\l&#43; types_aok\l types_cc\l&#43; types_cc\l types_short\l&#43; types_short\l types_short_aok\l&#43; types_short_aok\l types_short_cc\l&#43; types_short_cc\l types_short_swgb\l&#43; types_short_swgb\l types_swgb\l&#43; types_swgb\l&#43; u_loc\l&#43; unit_cnst\l&#43; unknown2\l&#43; utype\l- valid_since_last_check\l virtual_types\l&#43; virtual_types\l virtual_types_aoc\l&#43; virtual_types_aoc\l virtual_types_aof\l&#43; virtual_types_aof\l virtual_types_aohd\l&#43; virtual_types_aohd\l virtual_types_aok\l&#43; virtual_types_aok\l virtual_types_cc\l&#43; virtual_types_cc\l virtual_types_swgb\l&#43; virtual_types_swgb\l virtual_types_up\l&#43; virtual_types_up\l| accept()\l areaName()\l check()\l check_and_save()\l compress()\l getName()\l getPlayer()\l get_valid_since_last_check()\l null_location_unit()\l null_object()\l read()\l selectedUnits()\l setPlayer()\l tobuffer()\l valid_area()\l valid_area_location()\l valid_full_map()\l valid_location_unit()\l valid_object()\l valid_partial_map()\l valid_player()\l valid_technology_spec()\l valid_unit_spec()\l write()\l}&#34; style=filled fillcolor=&#34;#ffffff&#34; shape=&#34;record&#34;]; n7 [label=&#34;{ConditionItemData|&#43; editor\l&#43; treeitem\l&#43; trig_index\l| Copy()\l Delete()\l DuplicatePlayers()\l GetCondition()\l GetName()\l&#43; GetTrigger()\l ModifyIndex()\l OpenEditor()\l}&#34; style=filled fillcolor=&#34;#ffffff&#34; shape=&#34;record&#34;]; n38 [label=&#34;{io_error||}&#34; style=filled fillcolor=&#34;#ffffff&#34; shape=&#34;record&#34;]; n39 [label=&#34;{p||}&#34; style=filled fillcolor=&#34;#ffffff&#34; shape=&#34;record&#34;]; n47 [label=&#34;{unit_in_rect|- _rect\l- _rect\l|}&#34; style=filled fillcolor=&#34;#ffffff&#34; shape=&#34;record&#34;]; n5 [label=&#34;{ColorLink|&#43; ref\l|}&#34; style=filled fillcolor=&#34;#ffffff&#34; shape=&#34;record&#34;]; n20 [label=&#34;{MemBuffer|- blen\l- buffer\l- mine\l- pos\l- writeable\l| checkFits()\l fill()\l&#43; get()\l read()\l reads()\l skip()\l write()\l writes()\l}&#34; style=filled fillcolor=&#34;#ffffff&#34; shape=&#34;record&#34;]; n15 [label=&#34;{ItemData|&#43; index\l&#43; type\l| Copy()\l Delete()\l DuplicatePlayers()\l GetName()\l&#43; GetTrigger()\l ModifyIndex()\l OpenEditor()\l}&#34; style=filled fillcolor=&#34;#ffffff&#34; shape=&#34;record&#34;]; n16 [label=&#34;{Link|- _id\l- _name\l&#43; _next\l| id()\l name()\l next()\l read()\l setNext()\l}&#34; style=filled fillcolor=&#34;#ffffff&#34; shape=&#34;record&#34;]; n21 [label=&#34;{NullBuffer|- _size\l| fill()\l read()\l reads()\l size()\l skip()\l write()\l writes()\l}&#34; style=filled fillcolor=&#34;#ffffff&#34; shape=&#34;record&#34;]; n24 [label=&#34;{SVector|- begin\l- end\l- next\l- realloc_flag\l|&#43; allocate()\l&#43; append()\l&#43; at()\l&#43; clear()\l- copy()\l&#43; count()\l- expand()\l&#43; first()\l&#43; insert()\l&#43; last()\l&#43; remove()\l}&#34; style=filled fillcolor=&#34;#ffffff&#34; shape=&#34;record&#34;]; n25 [label=&#34;{Scenario|&#43; OUTOFBOUNDS\l StandardAI\l&#43; StandardAI\l StandardAI2\l&#43; StandardAI2\l&#43; TEMPTERRAIN\l&#43; TEMPTERRAIN2\l&#43; all_techs\l&#43; bBitmap\l&#43; bitmap\l&#43; cFiles\l&#43; cinem\l&#43; editor_pos\l&#43; files\l&#43; game\l&#43; header\l&#43; lock_teams\l&#43; map\l&#43; max_teams\l&#43; messages\l- mod_status\l&#43; msg\l&#43; mstrings\l&#43; next_uid\l&#43; objstate\l&#43; origname\l&#43; pergame\l&#43; perversion\l pgAOC\l&#43; pgAOC\l pgAOE\l&#43; pgAOE\l pgAOF\l&#43; pgAOF\l pgAOF4\l&#43; pgAOF4\l pgAOF6\l&#43; pgAOF6\l pgAOHD\l&#43; pgAOHD\l pgAOHD4\l&#43; pgAOHD4\l pgAOHD6\l&#43; pgAOHD6\l pgAOK\l&#43; pgAOK\l&#43; pgGame\l pgSWGB\l&#43; pgSWGB\l pgSWGBCC\l&#43; pgSWGBCC\l pgUP\l&#43; pgUP\l&#43; player_choose_teams\l&#43; players\l pv1_15\l&#43; pv1_15\l pv1_18\l&#43; pv1_18\l&#43; pv1_21\l pv1_22\l&#43; pv1_22\l pv1_23\l&#43; pv1_23\l pv1_24\l&#43; pv1_24\l pv1_26\l&#43; pv1_26\l pv1_30\l&#43; pv1_30\l&#43; random_start_points\l- sect\l&#43; t_order\l&#43; triggers\l&#43; trigver\l&#43; unk3\l&#43; unk4\l&#43; unknown\l&#43; ver1\l&#43; ver2\l&#43; version2\l&#43; vict\l| AOKBMP()\l accept()\l adapt_game()\l add_activation()\l aoc_to_aok()\l aoc_to_hd4()\l aoc_to_hd6()\l aohd_to_hd6()\l aok_to_aoc()\l auto_upgrade_hd4()\l auto_upgrade_hd6()\l change_unit_type_for_all_of_type()\l clean_format()\l clean_triggers()\l clearaicpvc()\l compress_unit_ids()\l datasetRequired()\l delete_player_units()\l delete_triggers()\l duplicate_triggers()\l exFile()\l expansionsRequired()\l export_bmp()\l fix_t_order()\l fix_trigger_outliers()\l floodFill4()\l floodFillElev4()\l getPlayerCount()\l get_number_active_players()\l hd4_to_hd6()\l hd_to_10c()\l hd_to_swgb()\l hd_to_up()\l insert_trigger()\l instructions_panel_set()\l instructions_sound_id_set()\l instructions_sound_text_set()\l instructions_string_reset()\l instructions_string_zero()\l isTerrainEdge()\l is_userpatch()\l map_change_elevation()\l map_copy()\l map_delete()\l map_duplicate()\l map_move()\l map_paste()\l map_repeat()\l map_scale()\l map_size()\l map_swap()\l move_triggers()\l&#43; needsave()\l next_sect()\l open()\l outline()\l outlineDraw()\l prefix_display_order()\l randomize_unit_frames()\l read()\l read_data()\l remove_display_order_prefix()\l remove_trigger_descriptions()\l remove_trigger_names()\l requireDataset()\l reset()\l save()\l save_pseudonyms()\l set_number_active_players()\l set_unit_z_to_map_elev()\l sort_conds_effects()\l strip_patch4()\l strip_patch6()\l swapTerrain()\l swap_players()\l swap_trigger_names_descriptions()\l swap_triggers()\l sync_triggers()\l toFile()\l unrequireDataset()\l up_to_10c()\l up_to_aofe()\l up_to_hd()\l up_to_swgb()\l water_cliffs_visibility()\l write()\l write_data()\l}&#34; style=filled fillcolor=&#34;#ffffff&#34; shape=&#34;record&#34;]; n4 [label=&#34;{ChangePlayerVisitor|- _player\l| visit()\l}&#34; style=filled fillcolor=&#34;#ffffff&#34; shape=&#34;record&#34;]; n9 [label=&#34;{ESDATA|- aitype_count\l&#43; aitypes\l- civ_count\l&#43; civs\l- color_count\l&#43; colors\l pfuncs\l- pfuncs\l- res_count\l&#43; resources\l- rstate\l- tech_count\l&#43; techs\l- terrain_count\l&#43; terrains\l&#43; ug_buildings\l&#43; ug_units\l- unit_count\l- unitgroup_count\l&#43; unitgroups\l&#43; units\l| endResources()\l getCount()\l load()\l readAitypes()\l readCiv()\l readColor()\l readResources()\l readSimple()\l readTech()\l readTerrain()\l readUnit()\l readUnitGroup()\l}&#34; style=filled fillcolor=&#34;#ffffff&#34; shape=&#34;record&#34;]; n12 [label=&#34;{EditEffect|&#43; N_CONTROLS\l&#43; TrigCallback\l&#43; e\l| update()\l}&#34; style=filled fillcolor=&#34;#ffffff&#34; shape=&#34;record&#34;]; n23 [label=&#34;{SString|- data\l- len\l null\l- null\l|&#43; c_str()\l erase()\l&#43; length()\l lock()\l&#43; lwn()\l put()\l read()\l set()\l&#43; total_size()\l unlock()\l write()\l}&#34; style=filled fillcolor=&#34;#ffffff&#34; shape=&#34;record&#34;]; n29 [label=&#34;{TrigXmlReader|| read()\l}&#34; style=filled fillcolor=&#34;#ffffff&#34; shape=&#34;record&#34;]; n31 [label=&#34;{Trigger|&#43; conds\l&#43; description\l&#43; display_order\l&#43; effects\l&#43; id\l&#43; loop\l&#43; name\l&#43; obj\l&#43; obj_order\l&#43; obj_str_id\l&#43; state\l&#43; u1\l| accept()\l getIDName()\l getName()\l get_player()\l read()\l sort_conditions()\l sort_effects()\l tobuffer()\l write()\l}&#34; style=filled fillcolor=&#34;#ffffff&#34; shape=&#34;record&#34;]; n32 [label=&#34;{TriggerVisitor||&#43; visitEnd()\l}&#34; style=filled fillcolor=&#34;#ffffff&#34; shape=&#34;record&#34;]; n33 [label=&#34;{Unit|- cnst\l&#43; frame\l&#43; garrison\l&#43; ident\l- pType\l&#43; rotate\l size\l&#43; size\l&#43; state\l&#43; x\l&#43; y\l&#43; z\l| getType()\l getTypeID()\l read()\l setType()\l toBuffer()\l}&#34; style=filled fillcolor=&#34;#ffffff&#34; shape=&#34;record&#34;]; n1 [label=&#34;{AutoFile|- _file\l| close()\l get()\l}&#34; style=filled fillcolor=&#34;#ffffff&#34; shape=&#34;record&#34;]; n10 [label=&#34;{EditCondition|&#43; N_CONTROLS\l&#43; c\l| update()\l}&#34; style=filled fillcolor=&#34;#ffffff&#34; shape=&#34;record&#34;]; n48 [label=&#34;{unit_is_type|- _type\l|}&#34; style=filled fillcolor=&#34;#ffffff&#34; shape=&#34;record&#34;]; n35 [label=&#34;{UnitLink|&#43; hp\l|}&#34; style=filled fillcolor=&#34;#ffffff&#34; shape=&#34;record&#34;]; n36 [label=&#34;{bad_data_error||}&#34; style=filled fillcolor=&#34;#ffffff&#34; shape=&#34;record&#34;]; n27 [label=&#34;{TechLink|&#43; civ\l|}&#34; style=filled fillcolor=&#34;#ffffff&#34; shape=&#34;record&#34;]; n2 [label=&#34;{Buffer||}&#34; style=filled fillcolor=&#34;#ffffff&#34; shape=&#34;record&#34;]; n13 [label=&#34;{Effect|&#43; NUM_EFFECTS_AOC\l&#43; NUM_EFFECTS_AOF\l&#43; NUM_EFFECTS_AOF4\l&#43; NUM_EFFECTS_AOF6\l&#43; NUM_EFFECTS_AOHD\l&#43; NUM_EFFECTS_AOHD4\l&#43; NUM_EFFECTS_AOHD6\l&#43; NUM_EFFECTS_AOK\l&#43; NUM_EFFECTS_CC\l&#43; NUM_EFFECTS_SWGB\l&#43; NUM_EFFECTS_UP\l&#43; NUM_VIRTUAL_EFFECTS_AOC\l&#43; NUM_VIRTUAL_EFFECTS_AOF\l&#43; NUM_VIRTUAL_EFFECTS_AOHD\l&#43; NUM_VIRTUAL_EFFECTS_AOK\l&#43; NUM_VIRTUAL_EFFECTS_CC\l&#43; NUM_VIRTUAL_EFFECTS_SWGB\l&#43; NUM_VIRTUAL_EFFECTS_UP\l&#43; ai_goal\l&#43; amount\l&#43; area\l defaultvals\l&#43; defaultvals\l&#43; diplomacy\l&#43; disp_time\l&#43; group\l&#43; location\l&#43; num_sel\l&#43; pTech\l&#43; pUnit\l&#43; panel\l&#43; res_type\l&#43; s_player\l&#43; sound\l&#43; soundid\l&#43; stance\l&#43; t_player\l&#43; tech_cnst\l&#43; text\l&#43; textid\l&#43; trig_index\l types\l&#43; types\l types_aoc\l&#43; types_aoc\l types_aof\l&#43; types_aof\l types_aohd\l&#43; types_aohd\l types_aok\l&#43; types_aok\l types_cc\l&#43; types_cc\l types_short\l&#43; types_short\l types_short_aoc\l&#43; types_short_aoc\l types_short_aof\l&#43; types_short_aof\l types_short_aohd\l&#43; types_short_aohd\l types_short_aok\l&#43; types_short_aok\l types_short_cc\l&#43; types_short_cc\l types_short_swgb\l&#43; types_short_swgb\l types_short_up\l&#43; types_short_up\l types_swgb\l&#43; types_swgb\l types_up\l&#43; types_up\l&#43; uid_loc\l&#43; uids\l&#43; unit_cnst\l&#43; utype\l- valid_since_last_check\l virtual_types\l&#43; virtual_types\l virtual_types_aoc\l&#43; virtual_types_aoc\l virtual_types_aof\l&#43; virtual_types_aof\l virtual_types_aohd\l&#43; virtual_types_aohd\l virtual_types_aok\l&#43; virtual_types_aok\l virtual_types_cc\l&#43; virtual_types_cc\l virtual_types_swgb\l&#43; virtual_types_swgb\l virtual_types_up\l&#43; virtual_types_up\l| accept()\l areaName()\l check()\l check_and_save()\l compress()\l getName()\l getPlayer()\l getTypeName()\l get_valid_since_last_check()\l has_selected()\l has_unit_constant()\l isCeilAmount()\l isFloorAmount()\l null_location_unit()\l read()\l selectedUnits()\l setPlayer()\l tobuffer()\l valid_area()\l valid_area_location()\l valid_destination()\l valid_full_map()\l valid_location_coord()\l valid_location_unit()\l valid_panel()\l valid_partial_map()\l valid_points()\l valid_selected()\l valid_source_player()\l valid_target_player()\l valid_technology_spec()\l valid_trigger()\l valid_unit_constant()\l valid_unit_spec()\l write()\l}&#34; style=filled fillcolor=&#34;#ffffff&#34; shape=&#34;record&#34;]; { n21 n20 } -&gt; n2 [arrowhead=&#34;empty&#34;]; { n10 n12 } -&gt; n11 [arrowhead=&#34;empty&#34;]; { n35 n27 n34 n5 } -&gt; n16 [arrowhead=&#34;empty&#34;]; { n13 n6 } -&gt; n8 [arrowhead=&#34;empty&#34;]; { n14 n7 } -&gt; n15 [arrowhead=&#34;empty&#34;]; { n4 n30 n28 } -&gt; n32 [arrowhead=&#34;empty&#34;];     Try opening a scenario saved from DE I receive this error 1 2 3 4 5 6 7 8  Failed to open as The Conquerors scenario file." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://mullikine.github.io/posts/ts-aoe2de/" />
<meta property="article:published_time" content="2019-11-16T00:00:00+13:00" />
<meta property="article:modified_time" content="2019-11-16T00:00:00+13:00" /><meta property="og:site_name" content="Bodacious Blog" />


  </head>
  <body>
    <header class="app-header">
      <a href="https://mullikine.github.io"><img class="app-header-avatar" src="http://mullikine.github.io/fievel.png" alt="John Doe" /></a>
      <h1>Bodacious Blog</h1>
      
      <div class="app-header-social">
        
          <a target="_blank" href="https://github.com/mullikine"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-github">
  <title>github</title>
  <path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path>
</svg></a>
        
          <a target="_blank" href="https://linkedin.com/in/shane-mulligan-811b942b/"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-linkedin">
  <title>linkedin</title>
  <path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"></path><rect x="2" y="9" width="4" height="12"></rect><circle cx="4" cy="4" r="2"></circle>
</svg></a>
        
          <a target="_blank" href="https://gitlab.com/mullikine"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-gitlab">
  <title>gitlab</title>
  <path d="M22.65 14.39L12 22.13 1.35 14.39a.84.84 0 0 1-.3-.94l1.22-3.78 2.44-7.51A.42.42 0 0 1 4.82 2a.43.43 0 0 1 .58 0 .42.42 0 0 1 .11.18l2.44 7.49h8.1l2.44-7.51A.42.42 0 0 1 18.6 2a.43.43 0 0 1 .58 0 .42.42 0 0 1 .11.18l2.44 7.51L23 13.45a.84.84 0 0 1-.35.94z"></path>
</svg></a>
        
          <a target="_blank" href="https://twitter.com/mullikine"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-twitter">
  <title>twitter</title>
  <path d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"></path>
</svg></a>
        
        <a href="https://mullikine.github.io/cv/">CV</a>
      </div>
<div class="highlights">
<a href="https://mullikine.github.io/posts/practical-macros-in-racket-and-how-to-work-with-them/">Practical macros in Racket</a>
<br />
<a href="https://mullikine.github.io/posts/github-search-with-bigquery/">Searching GitHub with BigQuery</a>

<br />
<a href="https://mullikine.github.io/posts/arbitrary-interpreters-for-babel/">Arbitrary interpreters for Babel</a>
<br />
<a href="https://mullikine.github.io/posts/review-of-the-illustrated-transformer/">The Illustrated Transformer</a>
<br />
<a href="https://mullikine.github.io/glossary.html">Glossary A-Z (70 topics)</a>
<br />
<a href="https://mullikine.github.io/codelingo-vs-linters/summary/">CodeLingo vs Linters</a>
<br />
<div class="taglist">

<a class="tag" href="https://mullikine.github.io/tags/gpt-2/">GPT-2</a>
<a class="tag" href="https://mullikine.github.io/tags/nlp/">NLP</a>
<a class="tag" href="https://mullikine.github.io/tags/emacs/">emacs</a>
<a class="tag" href="https://mullikine.github.io/tags/elisp/">elisp</a>
<a class="tag" href="https://mullikine.github.io/tags/racket/">racket</a>
<a class="tag" href="https://mullikine.github.io/tags/haskell/">haskell</a>
<a class="tag" href="https://mullikine.github.io/tags/biosemiotics/">biosemiotics</a>
<a class="tag" href="https://mullikine.github.io/tags/ir/">IR</a>
<a class="tag" href="https://mullikine.github.io/tags/games/">games</a>
<a class="tag" href="https://mullikine.github.io/tags/info/">information theory</a>
<a class="tag" href="https://mullikine.github.io/tags/probability/">probability</a>
<a class="tag" href="https://mullikine.github.io/tags/problog/">problog</a>
<a class="tag" href="https://mullikine.github.io/tags/bash/">bash</a>
<a class="tag" href="https://mullikine.github.io/tags/gcp/">GCP</a>
<a class="tag" href="https://mullikine.github.io/tags/github/">github</a>
<a class="tag" href="https://mullikine.github.io/tags/parsers/">parsers</a>
<a class="tag" href="https://mullikine.github.io/tags/rust/">rust</a>
<a class="tag" href="https://mullikine.github.io/tags/cpp/">c++</a>
<a class="tag" href="https://mullikine.github.io/tags/transformer/">transformer</a>
<a class="tag" href="https://mullikine.github.io/tags/kaggle/">kaggle</a>
<a class="tag" href="https://mullikine.github.io/tags/dl/">deep learning</a>
<a class="tag" href="https://mullikine.github.io/tags/dsls/">DSLs</a>
<a class="tag" href="https://mullikine.github.io/tags/df/">dwarf fortress</a>
<a class="tag" href="https://mullikine.github.io/tags/spacy/">spacy</a>
<a class="tag" href="https://mullikine.github.io/tags/latex/">latex</a>
<a class="tag" href="https://mullikine.github.io/tags/graphviz/">graphviz</a>
<a class="tag" href="https://mullikine.github.io/tags/python/">python</a>
<a class="tag" href="https://mullikine.github.io/tags/golang/">golang</a>
<a class="tag" href="https://mullikine.github.io/tags/codelingo/">codelingo</a>
<a class="tag" href="https://mullikine.github.io/tags/math/">math</a>
<a class="tag" href="https://mullikine.github.io/tags/review/">review</a>
</div>
<div>
    </header>
    <main class="app-container">
      
  <article class="post">
    <header class="post-header">
      <h1 class ="post-title">Updating Trigger Studio for Age of Empires II: DE</h1>
      <div class="post-meta">
        <div>
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-calendar">
  <title>calendar</title>
  <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line>
</svg>
          Nov 16, 2019
        </div>
        <div>
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-clock">
  <title>clock</title>
  <circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline>
</svg>
          11 min read
        </div><div>
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tag">
  <title>tag</title>
  <path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7" y2="7"></line>
</svg>
          <a class="tag" href="https://mullikine.github.io/tags/cpp/">cpp</a><a class="tag" href="http://mullikine.github.io/tags/aoe/">aoe</a></div></div>
    </header>
    

<link rel="stylesheet" type="text/css" href="https://mullikine.github.io/css/magit.css"/>

<script src="https://mullikine.github.io/js/mathjax-config.js"></script>
 
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-AMS_HTML"></script>


    <div class="post-content">
      

<h2 id="set-up-vs2005-on-xp">Set up VS2005 on XP</h2>

<p>I&rsquo;m using VS2005 for the maximum compatibility.</p>

<figure>
    <img src="https://mullikine.github.io/ox-hugo/xp-ts.png"/> 
</figure>


<h2 id="class-diagram-of-ts">Class diagram of TS</h2>

<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-graphviz-dot" data-lang="graphviz-dot"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">38
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">39
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">40
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">41
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">42
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">43
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">44
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">45
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">46
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">47
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">48
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">49
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">50
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">51
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">52
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-graphviz-dot" data-lang="graphviz-dot">n17 [label=&#34;{LinkList|- _head\l- _tail\l|  clear()\l  getById()\l  getByIdSafe()\l  head()\l  pop()\l  push_back()\l}&#34; style=filled fillcolor=&#34;#ffffff&#34; shape=&#34;record&#34;];
n19 [label=&#34;{MapCopyCache|+ source\l+ source\l+ unitcount\l+ unitcount\l+ units\l+ units\l|}&#34; style=filled fillcolor=&#34;#ffffff&#34; shape=&#34;record&#34;];
n41 [label=&#34;{playersunit_ucnst_equals|- _cnst\l|}&#34; style=filled fillcolor=&#34;#ffffff&#34; shape=&#34;record&#34;];
n42 [label=&#34;{playersunit_ucnst_notequals|- _cnst\l|}&#34; style=filled fillcolor=&#34;#ffffff&#34; shape=&#34;record&#34;];
n3 [label=&#34;{Campaign|+ header\l|  open()\l  reset()\l}&#34; style=filled fillcolor=&#34;#ffffff&#34; shape=&#34;record&#34;];
n11 [label=&#34;{EditEC|+ index\l+ mapview\l+ parent\l+ players\l+ trigindex\l+ user\l|}&#34; style=filled fillcolor=&#34;#ffffff&#34; shape=&#34;record&#34;];
n30 [label=&#34;{TrigXmlVisitor|- _ss\l- _trigcount\l|  visit()\l  visitEnd()\l}&#34; style=filled fillcolor=&#34;#ffffff&#34; shape=&#34;record&#34;];
n44 [label=&#34;{uid_equals|- _uid\l|}&#34; style=filled fillcolor=&#34;#ffffff&#34; shape=&#34;record&#34;];
n45 [label=&#34;{unit_in_area|- _area\l|}&#34; style=filled fillcolor=&#34;#ffffff&#34; shape=&#34;record&#34;];
n8 [label=&#34;{ECBase|+ GAIA_INDEX\l+ ectype\l+ parent_trigger_id\l+ size\l+ type\l|}&#34; style=filled fillcolor=&#34;#ffffff&#34; shape=&#34;record&#34;];
n14 [label=&#34;{EffectItemData|+ editor\l+ treeitem\l+ trig_index\l|  Copy()\l  Delete()\l  DuplicatePlayers()\l  GetEffect()\l  GetName()\l+ GetTrigger()\l  ModifyIndex()\l  OpenEditor()\l}&#34; style=filled fillcolor=&#34;#ffffff&#34; shape=&#34;record&#34;];
n37 [label=&#34;{get_ec_player|- _player\l|+ player()\l}&#34; style=filled fillcolor=&#34;#ffffff&#34; shape=&#34;record&#34;];
n40 [label=&#34;{players||}&#34; style=filled fillcolor=&#34;#ffffff&#34; shape=&#34;record&#34;];
n43 [label=&#34;{send_visitor|- _tv\l|}&#34; style=filled fillcolor=&#34;#ffffff&#34; shape=&#34;record&#34;];
n28 [label=&#34;{TrigScrawlVisitor|- _ss\l- _trigcount\l|  visit()\l  visitEnd()\l}&#34; style=filled fillcolor=&#34;#ffffff&#34; shape=&#34;record&#34;];
n34 [label=&#34;{UnitGroupLink|+ count\l+ list\l|}&#34; style=filled fillcolor=&#34;#ffffff&#34; shape=&#34;record&#34;];
n22 [label=&#34;{Player|+ age\l+ ai\l+ aifile\l+ aimode\l+ avictory\l+ camera\l+ civ\l+ color\l+ cty\l+ ctyfile\l+ diplomacy\l+ dis_bldg\l+ dis_tech\l+ dis_unit\l+ enable\l+ ending_age\l+ human\l+ name\l  names\l+ names\l+ ndis_b\l+ ndis_t\l+ ndis_u\l  num_players\l+ num_players\l+ player_number\l+ pop\l+ resources\l+ stable\l+ u1\l+ u2\l+ ucount\l+ units\l+ vc\l+ vcfile\l|  add_unit()\l  change_unit_type_for_all_of_type()\l  clear_ai()\l  clear_cty()\l  clear_vc()\l  erase_unit()\l  erase_unit_area()\l  erase_unit_type()\l  export_ai()\l  export_cty()\l  export_vc()\l  find_unit()\l  import_ai()\l  import_cty()\l  import_vc()\l  read_age()\l  read_aifiles()\l  read_aimode()\l  read_camera_longs()\l  read_data1()\l  read_data3()\l  read_data4()\l  read_diplomacy()\l  read_dis_bldgs()\l  read_dis_techs()\l  read_dis_units()\l  read_header_name()\l  read_header_stable()\l  read_ndis_bldgs()\l  read_ndis_techs()\l  read_ndis_units()\l  read_player_number()\l  read_resources()\l  read_units()\l  reset()\l  write_data1()\l  write_data3()\l  write_header_name()\l  write_header_stable()\l  write_no_units()\l  write_units()\l}&#34; style=filled fillcolor=&#34;#ffffff&#34; shape=&#34;record&#34;];
n26 [label=&#34;{Setts|+ BasePath\l+ DelTempOnExit\l+ ScenPath\l+ TempPath\l+ asktoconverteffects\l+ disabletips\l+ displayhints\l+ drawconds\l+ draweffects\l+ drawelevation\l+ drawlocations\l+ drawplayer\l+ drawterrain\l+ editall\l+ forceenabletips\l+ intense\l+ logname\l+ nowarnings\l- path\l- recent\l+ recent_first\l- recent_used\l+ showdisplayorder\l+ showtrigfunction\l+ showtrigids\l+ showtrignames\l+ warnbits\l+ zoom\l|  load()\l  read_recent()\l  recent_getnext()\l  recent_push()\l  write_recent()\l}&#34; style=filled fillcolor=&#34;#ffffff&#34; shape=&#34;record&#34;];
n6 [label=&#34;{Condition|+ NUM_CONDITIONS_AOF4\l+ NUM_CONDITIONS_AOHD4\l+ NUM_CONDITIONS_AOK\l+ NUM_CONDITIONS_CC\l+ NUM_CONDITIONS_SWGB\l+ NUM_TAUNT_SETS\l+ NUM_VIRTUAL_CONDITIONS_AOC\l+ NUM_VIRTUAL_CONDITIONS_AOF\l+ NUM_VIRTUAL_CONDITIONS_AOHD\l+ NUM_VIRTUAL_CONDITIONS_AOK\l+ NUM_VIRTUAL_CONDITIONS_CC\l+ NUM_VIRTUAL_CONDITIONS_SWGB\l+ NUM_VIRTUAL_CONDITIONS_UP\l+ ai_signal\l+ amount\l+ area\l  defaultvals\l+ defaultvals\l+ group\l+ object\l+ pTech\l+ pUnit\l+ player\l+ res_type\l+ reserved\l+ reverse_hd\l  taunt_set\l+ taunt_set\l+ tech_cnst\l+ timer\l  types\l+ types\l  types_aok\l+ types_aok\l  types_cc\l+ types_cc\l  types_short\l+ types_short\l  types_short_aok\l+ types_short_aok\l  types_short_cc\l+ types_short_cc\l  types_short_swgb\l+ types_short_swgb\l  types_swgb\l+ types_swgb\l+ u_loc\l+ unit_cnst\l+ unknown2\l+ utype\l- valid_since_last_check\l  virtual_types\l+ virtual_types\l  virtual_types_aoc\l+ virtual_types_aoc\l  virtual_types_aof\l+ virtual_types_aof\l  virtual_types_aohd\l+ virtual_types_aohd\l  virtual_types_aok\l+ virtual_types_aok\l  virtual_types_cc\l+ virtual_types_cc\l  virtual_types_swgb\l+ virtual_types_swgb\l  virtual_types_up\l+ virtual_types_up\l|  accept()\l  areaName()\l  check()\l  check_and_save()\l  compress()\l  getName()\l  getPlayer()\l  get_valid_since_last_check()\l  null_location_unit()\l  null_object()\l  read()\l  selectedUnits()\l  setPlayer()\l  tobuffer()\l  valid_area()\l  valid_area_location()\l  valid_full_map()\l  valid_location_unit()\l  valid_object()\l  valid_partial_map()\l  valid_player()\l  valid_technology_spec()\l  valid_unit_spec()\l  write()\l}&#34; style=filled fillcolor=&#34;#ffffff&#34; shape=&#34;record&#34;];
n7 [label=&#34;{ConditionItemData|+ editor\l+ treeitem\l+ trig_index\l|  Copy()\l  Delete()\l  DuplicatePlayers()\l  GetCondition()\l  GetName()\l+ GetTrigger()\l  ModifyIndex()\l  OpenEditor()\l}&#34; style=filled fillcolor=&#34;#ffffff&#34; shape=&#34;record&#34;];
n38 [label=&#34;{io_error||}&#34; style=filled fillcolor=&#34;#ffffff&#34; shape=&#34;record&#34;];
n39 [label=&#34;{p||}&#34; style=filled fillcolor=&#34;#ffffff&#34; shape=&#34;record&#34;];
n47 [label=&#34;{unit_in_rect|- _rect\l- _rect\l|}&#34; style=filled fillcolor=&#34;#ffffff&#34; shape=&#34;record&#34;];
n5 [label=&#34;{ColorLink|+ ref\l|}&#34; style=filled fillcolor=&#34;#ffffff&#34; shape=&#34;record&#34;];
n20 [label=&#34;{MemBuffer|- blen\l- buffer\l- mine\l- pos\l- writeable\l|  checkFits()\l  fill()\l+ get()\l  read()\l  reads()\l  skip()\l  write()\l  writes()\l}&#34; style=filled fillcolor=&#34;#ffffff&#34; shape=&#34;record&#34;];
n15 [label=&#34;{ItemData|+ index\l+ type\l|  Copy()\l  Delete()\l  DuplicatePlayers()\l  GetName()\l+ GetTrigger()\l  ModifyIndex()\l  OpenEditor()\l}&#34; style=filled fillcolor=&#34;#ffffff&#34; shape=&#34;record&#34;];
n16 [label=&#34;{Link|- _id\l- _name\l+ _next\l|  id()\l  name()\l  next()\l  read()\l  setNext()\l}&#34; style=filled fillcolor=&#34;#ffffff&#34; shape=&#34;record&#34;];
n21 [label=&#34;{NullBuffer|- _size\l|  fill()\l  read()\l  reads()\l  size()\l  skip()\l  write()\l  writes()\l}&#34; style=filled fillcolor=&#34;#ffffff&#34; shape=&#34;record&#34;];
n24 [label=&#34;{SVector|- begin\l- end\l- next\l- realloc_flag\l|+ allocate()\l+ append()\l+ at()\l+ clear()\l- copy()\l+ count()\l- expand()\l+ first()\l+ insert()\l+ last()\l+ remove()\l}&#34; style=filled fillcolor=&#34;#ffffff&#34; shape=&#34;record&#34;];
n25 [label=&#34;{Scenario|+ OUTOFBOUNDS\l  StandardAI\l+ StandardAI\l  StandardAI2\l+ StandardAI2\l+ TEMPTERRAIN\l+ TEMPTERRAIN2\l+ all_techs\l+ bBitmap\l+ bitmap\l+ cFiles\l+ cinem\l+ editor_pos\l+ files\l+ game\l+ header\l+ lock_teams\l+ map\l+ max_teams\l+ messages\l- mod_status\l+ msg\l+ mstrings\l+ next_uid\l+ objstate\l+ origname\l+ pergame\l+ perversion\l  pgAOC\l+ pgAOC\l  pgAOE\l+ pgAOE\l  pgAOF\l+ pgAOF\l  pgAOF4\l+ pgAOF4\l  pgAOF6\l+ pgAOF6\l  pgAOHD\l+ pgAOHD\l  pgAOHD4\l+ pgAOHD4\l  pgAOHD6\l+ pgAOHD6\l  pgAOK\l+ pgAOK\l+ pgGame\l  pgSWGB\l+ pgSWGB\l  pgSWGBCC\l+ pgSWGBCC\l  pgUP\l+ pgUP\l+ player_choose_teams\l+ players\l  pv1_15\l+ pv1_15\l  pv1_18\l+ pv1_18\l+ pv1_21\l  pv1_22\l+ pv1_22\l  pv1_23\l+ pv1_23\l  pv1_24\l+ pv1_24\l  pv1_26\l+ pv1_26\l  pv1_30\l+ pv1_30\l+ random_start_points\l- sect\l+ t_order\l+ triggers\l+ trigver\l+ unk3\l+ unk4\l+ unknown\l+ ver1\l+ ver2\l+ version2\l+ vict\l|  AOKBMP()\l  accept()\l  adapt_game()\l  add_activation()\l  aoc_to_aok()\l  aoc_to_hd4()\l  aoc_to_hd6()\l  aohd_to_hd6()\l  aok_to_aoc()\l  auto_upgrade_hd4()\l  auto_upgrade_hd6()\l  change_unit_type_for_all_of_type()\l  clean_format()\l  clean_triggers()\l  clearaicpvc()\l  compress_unit_ids()\l  datasetRequired()\l  delete_player_units()\l  delete_triggers()\l  duplicate_triggers()\l  exFile()\l  expansionsRequired()\l  export_bmp()\l  fix_t_order()\l  fix_trigger_outliers()\l  floodFill4()\l  floodFillElev4()\l  getPlayerCount()\l  get_number_active_players()\l  hd4_to_hd6()\l  hd_to_10c()\l  hd_to_swgb()\l  hd_to_up()\l  insert_trigger()\l  instructions_panel_set()\l  instructions_sound_id_set()\l  instructions_sound_text_set()\l  instructions_string_reset()\l  instructions_string_zero()\l  isTerrainEdge()\l  is_userpatch()\l  map_change_elevation()\l  map_copy()\l  map_delete()\l  map_duplicate()\l  map_move()\l  map_paste()\l  map_repeat()\l  map_scale()\l  map_size()\l  map_swap()\l  move_triggers()\l+ needsave()\l  next_sect()\l  open()\l  outline()\l  outlineDraw()\l  prefix_display_order()\l  randomize_unit_frames()\l  read()\l  read_data()\l  remove_display_order_prefix()\l  remove_trigger_descriptions()\l  remove_trigger_names()\l  requireDataset()\l  reset()\l  save()\l  save_pseudonyms()\l  set_number_active_players()\l  set_unit_z_to_map_elev()\l  sort_conds_effects()\l  strip_patch4()\l  strip_patch6()\l  swapTerrain()\l  swap_players()\l  swap_trigger_names_descriptions()\l  swap_triggers()\l  sync_triggers()\l  toFile()\l  unrequireDataset()\l  up_to_10c()\l  up_to_aofe()\l  up_to_hd()\l  up_to_swgb()\l  water_cliffs_visibility()\l  write()\l  write_data()\l}&#34; style=filled fillcolor=&#34;#ffffff&#34; shape=&#34;record&#34;];
n4 [label=&#34;{ChangePlayerVisitor|- _player\l|  visit()\l}&#34; style=filled fillcolor=&#34;#ffffff&#34; shape=&#34;record&#34;];
n9 [label=&#34;{ESDATA|- aitype_count\l+ aitypes\l- civ_count\l+ civs\l- color_count\l+ colors\l  pfuncs\l- pfuncs\l- res_count\l+ resources\l- rstate\l- tech_count\l+ techs\l- terrain_count\l+ terrains\l+ ug_buildings\l+ ug_units\l- unit_count\l- unitgroup_count\l+ unitgroups\l+ units\l|  endResources()\l  getCount()\l  load()\l  readAitypes()\l  readCiv()\l  readColor()\l  readResources()\l  readSimple()\l  readTech()\l  readTerrain()\l  readUnit()\l  readUnitGroup()\l}&#34; style=filled fillcolor=&#34;#ffffff&#34; shape=&#34;record&#34;];
n12 [label=&#34;{EditEffect|+ N_CONTROLS\l+ TrigCallback\l+ e\l|  update()\l}&#34; style=filled fillcolor=&#34;#ffffff&#34; shape=&#34;record&#34;];
n23 [label=&#34;{SString|- data\l- len\l  null\l- null\l|+ c_str()\l  erase()\l+ length()\l  lock()\l+ lwn()\l  put()\l  read()\l  set()\l+ total_size()\l  unlock()\l  write()\l}&#34; style=filled fillcolor=&#34;#ffffff&#34; shape=&#34;record&#34;];
n29 [label=&#34;{TrigXmlReader||  read()\l}&#34; style=filled fillcolor=&#34;#ffffff&#34; shape=&#34;record&#34;];
n31 [label=&#34;{Trigger|+ conds\l+ description\l+ display_order\l+ effects\l+ id\l+ loop\l+ name\l+ obj\l+ obj_order\l+ obj_str_id\l+ state\l+ u1\l|  accept()\l  getIDName()\l  getName()\l  get_player()\l  read()\l  sort_conditions()\l  sort_effects()\l  tobuffer()\l  write()\l}&#34; style=filled fillcolor=&#34;#ffffff&#34; shape=&#34;record&#34;];
n32 [label=&#34;{TriggerVisitor||+ visitEnd()\l}&#34; style=filled fillcolor=&#34;#ffffff&#34; shape=&#34;record&#34;];
n33 [label=&#34;{Unit|- cnst\l+ frame\l+ garrison\l+ ident\l- pType\l+ rotate\l  size\l+ size\l+ state\l+ x\l+ y\l+ z\l|  getType()\l  getTypeID()\l  read()\l  setType()\l  toBuffer()\l}&#34; style=filled fillcolor=&#34;#ffffff&#34; shape=&#34;record&#34;];
n1 [label=&#34;{AutoFile|- _file\l|  close()\l  get()\l}&#34; style=filled fillcolor=&#34;#ffffff&#34; shape=&#34;record&#34;];
n10 [label=&#34;{EditCondition|+ N_CONTROLS\l+ c\l|  update()\l}&#34; style=filled fillcolor=&#34;#ffffff&#34; shape=&#34;record&#34;];
n48 [label=&#34;{unit_is_type|- _type\l|}&#34; style=filled fillcolor=&#34;#ffffff&#34; shape=&#34;record&#34;];
n35 [label=&#34;{UnitLink|+ hp\l|}&#34; style=filled fillcolor=&#34;#ffffff&#34; shape=&#34;record&#34;];
n36 [label=&#34;{bad_data_error||}&#34; style=filled fillcolor=&#34;#ffffff&#34; shape=&#34;record&#34;];
n27 [label=&#34;{TechLink|+ civ\l|}&#34; style=filled fillcolor=&#34;#ffffff&#34; shape=&#34;record&#34;];
n2 [label=&#34;{Buffer||}&#34; style=filled fillcolor=&#34;#ffffff&#34; shape=&#34;record&#34;];
n13 [label=&#34;{Effect|+ NUM_EFFECTS_AOC\l+ NUM_EFFECTS_AOF\l+ NUM_EFFECTS_AOF4\l+ NUM_EFFECTS_AOF6\l+ NUM_EFFECTS_AOHD\l+ NUM_EFFECTS_AOHD4\l+ NUM_EFFECTS_AOHD6\l+ NUM_EFFECTS_AOK\l+ NUM_EFFECTS_CC\l+ NUM_EFFECTS_SWGB\l+ NUM_EFFECTS_UP\l+ NUM_VIRTUAL_EFFECTS_AOC\l+ NUM_VIRTUAL_EFFECTS_AOF\l+ NUM_VIRTUAL_EFFECTS_AOHD\l+ NUM_VIRTUAL_EFFECTS_AOK\l+ NUM_VIRTUAL_EFFECTS_CC\l+ NUM_VIRTUAL_EFFECTS_SWGB\l+ NUM_VIRTUAL_EFFECTS_UP\l+ ai_goal\l+ amount\l+ area\l  defaultvals\l+ defaultvals\l+ diplomacy\l+ disp_time\l+ group\l+ location\l+ num_sel\l+ pTech\l+ pUnit\l+ panel\l+ res_type\l+ s_player\l+ sound\l+ soundid\l+ stance\l+ t_player\l+ tech_cnst\l+ text\l+ textid\l+ trig_index\l  types\l+ types\l  types_aoc\l+ types_aoc\l  types_aof\l+ types_aof\l  types_aohd\l+ types_aohd\l  types_aok\l+ types_aok\l  types_cc\l+ types_cc\l  types_short\l+ types_short\l  types_short_aoc\l+ types_short_aoc\l  types_short_aof\l+ types_short_aof\l  types_short_aohd\l+ types_short_aohd\l  types_short_aok\l+ types_short_aok\l  types_short_cc\l+ types_short_cc\l  types_short_swgb\l+ types_short_swgb\l  types_short_up\l+ types_short_up\l  types_swgb\l+ types_swgb\l  types_up\l+ types_up\l+ uid_loc\l+ uids\l+ unit_cnst\l+ utype\l- valid_since_last_check\l  virtual_types\l+ virtual_types\l  virtual_types_aoc\l+ virtual_types_aoc\l  virtual_types_aof\l+ virtual_types_aof\l  virtual_types_aohd\l+ virtual_types_aohd\l  virtual_types_aok\l+ virtual_types_aok\l  virtual_types_cc\l+ virtual_types_cc\l  virtual_types_swgb\l+ virtual_types_swgb\l  virtual_types_up\l+ virtual_types_up\l|  accept()\l  areaName()\l  check()\l  check_and_save()\l  compress()\l  getName()\l  getPlayer()\l  getTypeName()\l  get_valid_since_last_check()\l  has_selected()\l  has_unit_constant()\l  isCeilAmount()\l  isFloorAmount()\l  null_location_unit()\l  read()\l  selectedUnits()\l  setPlayer()\l  tobuffer()\l  valid_area()\l  valid_area_location()\l  valid_destination()\l  valid_full_map()\l  valid_location_coord()\l  valid_location_unit()\l  valid_panel()\l  valid_partial_map()\l  valid_points()\l  valid_selected()\l  valid_source_player()\l  valid_target_player()\l  valid_technology_spec()\l  valid_trigger()\l  valid_unit_constant()\l  valid_unit_spec()\l  write()\l}&#34; style=filled fillcolor=&#34;#ffffff&#34; shape=&#34;record&#34;];
{ n21 n20 } -&gt; n2 [arrowhead=&#34;empty&#34;];
{ n10 n12 } -&gt; n11 [arrowhead=&#34;empty&#34;];
{ n35 n27 n34 n5 } -&gt; n16 [arrowhead=&#34;empty&#34;];
{ n13 n6 } -&gt; n8 [arrowhead=&#34;empty&#34;];
{ n14 n7 } -&gt; n15 [arrowhead=&#34;empty&#34;];
{ n4 n30 n28 } -&gt; n32 [arrowhead=&#34;empty&#34;];</code></pre></td></tr></table>
</div>
</div>

<figure>
    <img src="https://mullikine.github.io/ox-hugo/aokts.png"/> 
</figure>


<h2 id="try-opening-a-scenario-saved-from-de">Try opening a scenario saved from DE</h2>

<h3 id="i-receive-this-error">I receive this error</h3>

<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">8
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">Failed to open as The Conquerors scenario file.
Try opening as a SWGB scx file instead
using File-&gt;Open

The problem: Not a valid scenario.

If the game is able to open the scenario,
please report this error. Thanks.</code></pre></td></tr></table>
</div>
</div>

<h2 id="attempt-to-get-the-scenario-loading">Attempt to get the scenario loading</h2>

<h3 id="search-for-not-a-valid-scenario-in-the-code-dot">Search for <code>Not a valid scenario</code> in the code.</h3>

<p>It happens as the scenario is being read.</p>

<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#75715e">/* Header */</span>
<span style="color:#66d9ef">if</span> (<span style="color:#f92672">!</span>header.read(scx.get()))
{
  printf_log(<span style="color:#e6db74">&#34;Invalid scenario header in %s</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>, path);
  <span style="color:#66d9ef">throw</span> <span style="color:#a6e22e">runtime_error</span>(<span style="color:#e6db74">&#34;Not a valid scenario.&#34;</span>);
}
</code></pre></td></tr></table>
</div>
</div>

<h3 id="header-is-a-struct-inside-scen-dot-cpp-h-with-a-read-method"><code>header</code> is a struct inside <code>scen.{cpp,h}</code> with a read method</h3>

<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#75715e">//	Un-compressed Header
</span><span style="color:#75715e"></span><span style="color:#66d9ef">struct</span> _header
{
  <span style="color:#66d9ef">char</span> version[<span style="color:#ae81ff">5</span>];		<span style="color:#75715e">//Version string (+ 1 for NULL)
</span><span style="color:#75715e"></span>  <span style="color:#66d9ef">long</span> length;			<span style="color:#75715e">//length of header (after this point)
</span><span style="color:#75715e"></span>  HeaderType header_type;
  <span style="color:#66d9ef">unsigned</span> <span style="color:#66d9ef">long</span> instruct_len;  	<span style="color:#75715e">//Instructions string length
</span><span style="color:#75715e"></span>  <span style="color:#66d9ef">unsigned</span> <span style="color:#66d9ef">long</span> n_players;
  <span style="color:#66d9ef">unsigned</span> <span style="color:#66d9ef">long</span> uses_expansions; <span style="color:#75715e">// not sure about this
</span><span style="color:#75715e"></span>  <span style="color:#66d9ef">unsigned</span> <span style="color:#66d9ef">long</span> n_datasets;
  <span style="color:#66d9ef">unsigned</span> <span style="color:#66d9ef">long</span> datasets[NUM_DATASETS];  <span style="color:#75715e">// the number of elements read and saved is given by n_datasets. 5 is an arbitrary number
</span><span style="color:#75715e"></span>  __time32_t timestamp;	<span style="color:#75715e">//last save
</span><span style="color:#75715e"></span>  <span style="color:#75715e">//left out instructions in header
</span><span style="color:#75715e"></span>  UNREAD(<span style="color:#66d9ef">long</span> pcount);

  <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">reset</span>();
  <span style="color:#66d9ef">bool</span> <span style="color:#a6e22e">read</span>(FILE <span style="color:#f92672">*</span>scx);	<span style="color:#75715e">//error return
</span><span style="color:#75715e"></span>  <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">write</span>(FILE <span style="color:#f92672">*</span>scx, <span style="color:#66d9ef">const</span> SString <span style="color:#f92672">*</span>instr, <span style="color:#66d9ef">long</span> players, Game g);
    <span style="color:#66d9ef">bool</span> <span style="color:#a6e22e">expansionsRequired</span>();
    <span style="color:#66d9ef">bool</span> <span style="color:#a6e22e">datasetRequired</span>(Dataset<span style="color:#f92672">::</span>Value d);
    <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">requireDataset</span>(Dataset<span style="color:#f92672">::</span>Value d);
    <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">unrequireDataset</span>(Dataset<span style="color:#f92672">::</span>Value d);
} header;
</code></pre></td></tr></table>
</div>
</div>

<p>It appears there should be decent logging.</p>

<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#66d9ef">bool</span> Scenario<span style="color:#f92672">::</span>_header<span style="color:#f92672">::</span>read(FILE <span style="color:#f92672">*</span>scx)
{
  <span style="color:#66d9ef">bool</span> ret <span style="color:#f92672">=</span> true;
  printf_log(<span style="color:#e6db74">&#34;header:</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>);
  fread(version, <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">char</span>), <span style="color:#ae81ff">4</span>, scx);
  version[<span style="color:#ae81ff">5</span>] <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;\0&#39;</span>;
  printf_log(<span style="color:#e6db74">&#34;</span><span style="color:#ae81ff">\t</span><span style="color:#e6db74">version: %s.</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>, version);

  fread(<span style="color:#f92672">&amp;</span>length, <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">long</span>), <span style="color:#ae81ff">1</span>, scx);
  printf_log(<span style="color:#e6db74">&#34;</span><span style="color:#ae81ff">\t</span><span style="color:#e6db74">length: %ld.</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>, length);

  fread(<span style="color:#f92672">&amp;</span>header_type, <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">long</span>), <span style="color:#ae81ff">1</span>, scx); <span style="color:#75715e">// version number I think
</span><span style="color:#75715e"></span>  printf_log(<span style="color:#e6db74">&#34;</span><span style="color:#ae81ff">\t</span><span style="color:#e6db74">header_type: %ld.</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>, header_type);
  REPORTS(header_type <span style="color:#f92672">==</span> HT_SC <span style="color:#f92672">||</span> header_type <span style="color:#f92672">==</span> HT_AOE2SCENARIO, ret <span style="color:#f92672">=</span> false, <span style="color:#e6db74">&#34;Header type value invalid.</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>);
  fread(<span style="color:#f92672">&amp;</span>timestamp, <span style="color:#66d9ef">sizeof</span>(timestamp), <span style="color:#ae81ff">1</span>, scx);
  fread(<span style="color:#f92672">&amp;</span>instruct_len, <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">long</span>), <span style="color:#ae81ff">1</span>, scx);
  printf_log(<span style="color:#e6db74">&#34;</span><span style="color:#ae81ff">\t</span><span style="color:#e6db74">instruct_len: %ld.</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>, instruct_len);
  SKIP(scx, instruct_len);             <span style="color:#75715e">//instructions
</span><span style="color:#75715e"></span>  SKIP(scx, <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">long</span>));	<span style="color:#75715e">//unknown
</span><span style="color:#75715e"></span>  fread(<span style="color:#f92672">&amp;</span>n_players, <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">long</span>), <span style="color:#ae81ff">1</span>, scx);
  <span style="color:#66d9ef">if</span> (header_type <span style="color:#f92672">==</span> HT_AOE2SCENARIO) {
  	  <span style="color:#75715e">// aoe2scenario format
</span><span style="color:#75715e"></span>  	  SKIP(scx, <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">long</span>));
  	  fread(<span style="color:#f92672">&amp;</span>uses_expansions, <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">long</span>), <span style="color:#ae81ff">1</span>, scx);
  	  printf_log(<span style="color:#e6db74">&#34;uses expansions ? %d</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>, uses_expansions);
  	  fread(<span style="color:#f92672">&amp;</span>n_datasets, <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">long</span>), <span style="color:#ae81ff">1</span>, scx);
  	  <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; i <span style="color:#f92672">&lt;</span> n_datasets; i<span style="color:#f92672">++</span>) {
  	      fread(<span style="color:#f92672">&amp;</span>datasets[i], <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">long</span>), <span style="color:#ae81ff">1</span>, scx);
  	      printf_log(<span style="color:#e6db74">&#34;dataset %d enabled</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>, datasets[i]);
  	  }
  }

  <span style="color:#66d9ef">return</span> ret;
}
</code></pre></td></tr></table>
</div>
</div>

<h3 id="this-is-the-log">This is the log</h3>

<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">38
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">39
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">40
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">41
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">42
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">43
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">44
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">45
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">46
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">47
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">48
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">49
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">50
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">51
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">52
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">53
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">54
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">55
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">56
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">57
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">58
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">59
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">60
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">61
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">62
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">63
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">64
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">65
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">66
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">67
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">68
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">69
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">70
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">71
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">72
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">73
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">Opened log file y:\\ts.log.
TS Path: y:\
Last game was Age of Empires II: HD Edition 4.3 (2F).

Opened successfully genie/esdata from &#34;y:\\data_aok.xml&#34;...
Loaded:
648 technologies,
9 colors,
1115 units,
209 resources,
36 aitypes,
65 terrains,
20 unitgroups,
and 32 civilizations.
Done.

Game is Age of Empires II: HD Edition 4.3 (2F)
allies 1 1 1
allies 0 0 0
allies 1 1 1
allies 0 0 0
allies 1 1 1
allies 0 0 0
allies 1 1 1
allies 0 0 0
allies 1 1 1
allies 0 0 0
Selected 1, AOE 2.
Game is Age of Empires II: HD Edition 4.3 (2F)
Opening scenario &#34;Z:\DE version check.aoe2scenario&#34;
header:
  version: 1.36.
  length: 0.
  header_type: 5.
Header type value invalid.
  instruct_len: 1.
Invalid scenario header in Z:\DE version check.aoe2scenario
User message: Failed to open as The Conquerors scenario file.
Try opening as a SWGB scx file instead
using File-&gt;Open

The problem: Not a valid scenario.

If the game is able to open the scenario,
please report this error. Thanks.
Game is Age of Empires II: HD Edition 4.3 (2F)
allies 1 1 1
allies 0 0 0
allies 1 1 1
allies 0 0 0
Selected 1, AOE 2.
Game is Age of Empires II: HD Edition 4.3 (2F)
Opening scenario &#34;Z:\DE version check.aoe2scenario&#34;
header:
  version: 1.36.
  length: 0.
  header_type: 5.
Header type value invalid.
  instruct_len: 1.
Invalid scenario header in Z:\DE version check.aoe2scenario
User message: Failed to open as The Conquerors scenario file.
Try opening as a SWGB scx file instead
using File-&gt;Open

The problem: Not a valid scenario.

If the game is able to open the scenario,
please report this error. Thanks.
Game is Age of Empires II: HD Edition 4.3 (2F)
allies 1 1 1
allies 0 0 0
allies 1 1 1
allies 0 0 0</code></pre></td></tr></table>
</div>
</div>

<p>It failed at <code>Header type value invalid.</code></p>

<p>Add the type into the logged output.</p>

<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-diff" data-lang="diff"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-diff" data-lang="diff"><span style="color:#f92672">-	REPORTS(header_type == HT_SC || header_type == HT_AOE2SCENARIO, ret = false, &#34;Header type value invalid.\n&#34;);
</span><span style="color:#f92672"></span><span style="color:#a6e22e">+	REPORTS(header_type == HT_SC || header_type == HT_AOE2SCENARIO, ret = false, &#34;Header type value %ul invalid.\n&#34;, header_type);
</span></code></pre></td></tr></table>
</div>
</div>

<p><code>header_type</code> is not an enum value.</p>

<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">  version: 1.36.
  length: 0.
  header_type: 5.
Header type value 2118293808l invalid.</code></pre></td></tr></table>
</div>
</div>

<p>I overlooked =length:</p>

<p>0= in the log.</p>

<p>It appears the header has been removed from
the format.</p>

<h3 id="this-has-gotten-us-past-this-and-to-the-next-error">This has gotten us past this and to the next error</h3>

<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#66d9ef">bool</span> Scenario<span style="color:#f92672">::</span>_header<span style="color:#f92672">::</span>read(FILE <span style="color:#f92672">*</span>scx)
{
  <span style="color:#66d9ef">bool</span> ret <span style="color:#f92672">=</span> true;
  printf_log(<span style="color:#e6db74">&#34;header:</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>);
  fread(version, <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">char</span>), <span style="color:#ae81ff">4</span>, scx);
  version[<span style="color:#ae81ff">5</span>] <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;\0&#39;</span>;
  printf_log(<span style="color:#e6db74">&#34;</span><span style="color:#ae81ff">\t</span><span style="color:#e6db74">version: %s.</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>, version);

  fread(<span style="color:#f92672">&amp;</span>length, <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">long</span>), <span style="color:#ae81ff">1</span>, scx);
  printf_log(<span style="color:#e6db74">&#34;</span><span style="color:#ae81ff">\t</span><span style="color:#e6db74">length: %ld.</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>, length);

        <span style="color:#75715e">//if (! (length == 0 &amp;&amp; strcmp(version, &#34;1.36&#34;) == 0)) {
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">if</span> (length <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">0</span>) {
          fread(<span style="color:#f92672">&amp;</span>header_type, <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">long</span>), <span style="color:#ae81ff">1</span>, scx); <span style="color:#75715e">// version number I think
</span><span style="color:#75715e"></span>          printf_log(<span style="color:#e6db74">&#34;</span><span style="color:#ae81ff">\t</span><span style="color:#e6db74">header_type: %ld.</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>, header_type);
          REPORTS(header_type <span style="color:#f92672">==</span> HT_SC <span style="color:#f92672">||</span> header_type <span style="color:#f92672">==</span> HT_AOE2SCENARIO, ret <span style="color:#f92672">=</span> false, <span style="color:#e6db74">&#34;Header type value %ul invalid.</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>, header_type);
          fread(<span style="color:#f92672">&amp;</span>timestamp, <span style="color:#66d9ef">sizeof</span>(timestamp), <span style="color:#ae81ff">1</span>, scx);
          fread(<span style="color:#f92672">&amp;</span>instruct_len, <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">long</span>), <span style="color:#ae81ff">1</span>, scx);
          printf_log(<span style="color:#e6db74">&#34;</span><span style="color:#ae81ff">\t</span><span style="color:#e6db74">instruct_len: %ld.</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>, instruct_len);
          SKIP(scx, instruct_len);             <span style="color:#75715e">//instructions
</span><span style="color:#75715e"></span>          SKIP(scx, <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">long</span>));	<span style="color:#75715e">//unknown
</span><span style="color:#75715e"></span>          fread(<span style="color:#f92672">&amp;</span>n_players, <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">long</span>), <span style="color:#ae81ff">1</span>, scx);
          <span style="color:#66d9ef">if</span> (header_type <span style="color:#f92672">==</span> HT_AOE2SCENARIO) {
          	  <span style="color:#75715e">// aoe2scenario format
</span><span style="color:#75715e"></span>          	  SKIP(scx, <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">long</span>));
          	  fread(<span style="color:#f92672">&amp;</span>uses_expansions, <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">long</span>), <span style="color:#ae81ff">1</span>, scx);
          	  printf_log(<span style="color:#e6db74">&#34;uses expansions ? %d</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>, uses_expansions);
          	  fread(<span style="color:#f92672">&amp;</span>n_datasets, <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">long</span>), <span style="color:#ae81ff">1</span>, scx);
          	  <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; i <span style="color:#f92672">&lt;</span> n_datasets; i<span style="color:#f92672">++</span>) {
          	      fread(<span style="color:#f92672">&amp;</span>datasets[i], <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">long</span>), <span style="color:#ae81ff">1</span>, scx);
          	      printf_log(<span style="color:#e6db74">&#34;dataset %d enabled</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>, datasets[i]);
          	  }
          }
        }

  <span style="color:#66d9ef">return</span> ret;
}
</code></pre></td></tr></table>
</div>
</div>

<h3 id="the-new-error-message-dot-i-must-solve-this">The new error message. I must solve this</h3>

<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">Failed to open as Unknown scenario file.
The problem: There was a problem with the scenario data: unrecognized Format version

If the game is able to open the scenario,
please report this error. Thanks.</code></pre></td></tr></table>
</div>
</div>

<p>The problematic code.</p>

<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#75715e">/* Inflate and Read Compressed Data */</span>
<span style="color:#66d9ef">if</span> (header.header_type <span style="color:#f92672">==</span> HT_AOE2SCENARIO) {
  	<span style="color:#75715e">// length no longer indicates header length (or likely never truly did)
</span><span style="color:#75715e"></span>  	c_len <span style="color:#f92672">=</span> fsize(path) <span style="color:#f92672">-</span> ((<span style="color:#ae81ff">8</span> <span style="color:#f92672">+</span> <span style="color:#ae81ff">2</span> <span style="color:#f92672">+</span> header.n_datasets) <span style="color:#f92672">*</span> <span style="color:#ae81ff">4</span> <span style="color:#f92672">+</span> header.instruct_len);
} <span style="color:#66d9ef">else</span> {
  	c_len <span style="color:#f92672">=</span> fsize(path) <span style="color:#f92672">-</span> (header.length <span style="color:#f92672">+</span> <span style="color:#ae81ff">8</span>);	<span style="color:#75715e">//subtract header length
</span><span style="color:#75715e"></span>}
</code></pre></td></tr></table>
</div>
</div>

<p>I need a hex editor to find these magic numbers.</p>

    </div>
    <div class="post-footer">
      
    </div>
  </article>

    </main>
  </body>
</html>