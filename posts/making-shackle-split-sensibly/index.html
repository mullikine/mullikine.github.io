<!doctype html>
<html lang="en-us">
  <head>
    <title>Sensible Splits: Extending shackle.el // Bodacious Blog</title>
    <meta charset="utf-8" />
    <meta name="generator" content="Hugo 0.59.0-DEV" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="author" content="John Doe" />
    <meta name="description" content="" />
    <link rel="stylesheet" href="https://mullikine.github.io/css/main.min.e16b988f17f20e2d00cf6c3a4ab247ac7dc0a39d43725a98e46eaeb59d185840.css" />

    
    <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Sensible Splits: Extending shackle.el"/>
<meta name="twitter:description" content="shackle.el provides a single interface for managing the way windows are displayed in emacs. This means you don&rsquo;t have to dig into plugin code to provide ad-hoc advice to specific functions.
Unfortunately, it doesn&rsquo;t provide an option to split sensibly, allowing you only to specify exactly how you want windows to be displayed.
For example, it will allow to you specify that all help buffers split to the right with the following rule."/>

    <meta property="og:title" content="Sensible Splits: Extending shackle.el" />
<meta property="og:description" content="shackle.el provides a single interface for managing the way windows are displayed in emacs. This means you don&rsquo;t have to dig into plugin code to provide ad-hoc advice to specific functions.
Unfortunately, it doesn&rsquo;t provide an option to split sensibly, allowing you only to specify exactly how you want windows to be displayed.
For example, it will allow to you specify that all help buffers split to the right with the following rule." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://mullikine.github.io/posts/making-shackle-split-sensibly/" />
<meta property="article:published_time" content="2019-10-07T00:00:00+13:00" />
<meta property="article:modified_time" content="2019-10-07T00:00:00+13:00" /><meta property="og:site_name" content="Bodacious Blog" />


  </head>
  <body>
    <header class="app-header">
      <a href="https://mullikine.github.io"><img class="app-header-avatar" src="http://mullikine.github.io/brainy.png" alt="John Doe" /></a>
      <h1>Bodacious Blog</h1>
      <p>biosemiotics üåª, xenolingustics üëΩ and emacs üêÑ</p>
      <div class="app-header-social">
        
          <a target="_blank" href="https://github.com/mullikine"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-github">
  <title>github</title>
  <path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path>
</svg></a>
        
          <a target="_blank" href="https://linkedin.com/in/shane-mulligan-811b942b/"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-linkedin">
  <title>linkedin</title>
  <path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"></path><rect x="2" y="9" width="4" height="12"></rect><circle cx="4" cy="4" r="2"></circle>
</svg></a>
        
          <a target="_blank" href="https://gitlab.com/mullikine"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-gitlab">
  <title>gitlab</title>
  <path d="M22.65 14.39L12 22.13 1.35 14.39a.84.84 0 0 1-.3-.94l1.22-3.78 2.44-7.51A.42.42 0 0 1 4.82 2a.43.43 0 0 1 .58 0 .42.42 0 0 1 .11.18l2.44 7.49h8.1l2.44-7.51A.42.42 0 0 1 18.6 2a.43.43 0 0 1 .58 0 .42.42 0 0 1 .11.18l2.44 7.51L23 13.45a.84.84 0 0 1-.35.94z"></path>
</svg></a>
        
          <a target="_blank" href="https://www.facebook.com/shrubgrub"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-facebook">
  <title>facebook</title>
  <path d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"></path>
</svg></a>
        
          <a target="_blank" href="https://twitter.com/mullikine"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-twitter">
  <title>twitter</title>
  <path d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"></path>
</svg></a>
        
        <a href="https://mullikine.github.io/cv/">CV</a>
      </div>
    </header>
    <main class="app-container">
      
  <article class="post">
    <header class="post-header">
      <h1 class ="post-title">Sensible Splits: Extending shackle.el</h1>
      <div class="post-meta">
        <div>
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-calendar">
  <title>calendar</title>
  <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line>
</svg>
          Oct 7, 2019
        </div>
        <div>
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-clock">
  <title>clock</title>
  <circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline>
</svg>
          2 min read
        </div></div>
    </header>
    

<link rel="stylesheet" type="text/css" href="https://mullikine.github.io/css/magit.css"/>

<script src="https://mullikine.github.io/js/mathjax-config.js"></script>
 
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-AMS_HTML"></script>


    <div class="post-content">
      

<p><code>shackle.el</code> provides a single interface for managing the way windows are displayed in emacs. This means you don&rsquo;t have to dig into plugin code to provide ad-hoc advice to specific functions.</p>

<p>Unfortunately, it doesn&rsquo;t provide an option to split sensibly, allowing you only to specify exactly how you want windows to be displayed.</p>

<p>For example, it will allow to you specify that all help buffers split to the right with the following rule.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-emacs" data-lang="emacs">(<span style="color:#e6db74">&#34;*Help*&#34;</span> :other <span style="color:#66d9ef">t</span> :select <span style="color:#66d9ef">nil</span> :same <span style="color:#66d9ef">nil</span> :align <span style="color:#e6db74">&#39;right</span> :size <span style="color:#ae81ff">0.5</span>)</code></pre></div>
<p>We will make a function to determine which type of split to use based on the available screen real estate.</p>

<h2 id="this-is-the-function">This is the function</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-emacs" data-lang="emacs"><span style="color:#75715e">;; This function is derived from split-window-sensibly</span>
(defun my-shackle-sensible-alignment (<span style="color:#66d9ef">&amp;optional</span> window)
  (interactive)
  (let ((window (or window (<span style="color:#a6e22e">selected-window</span>))))
    (or (and (window-splittable-p window)
             <span style="color:#e6db74">&#39;below</span>)
        (and (window-splittable-p window <span style="color:#66d9ef">t</span>)
             <span style="color:#e6db74">&#39;right</span>)
        (and
         <span style="color:#75715e">;; If WINDOW is the only usable window on its frame (it is</span>
         <span style="color:#75715e">;; the only one or, not being the only one, all the other</span>
         <span style="color:#75715e">;; ones are dedicated) and is not the minibuffer window, try</span>
         <span style="color:#75715e">;; to split it vertically disregarding the value of</span>
         <span style="color:#75715e">;; `split-height-threshold&#39;.</span>
         (let ((frame (<span style="color:#a6e22e">window-frame</span> window)))
           (or
            (<span style="color:#a6e22e">eq</span> window (<span style="color:#a6e22e">frame-root-window</span> frame))
            (catch <span style="color:#e6db74">&#39;done</span>
              (walk-window-tree (lambda (w)
                                  (unless (or (<span style="color:#a6e22e">eq</span> w window)
                                              (<span style="color:#a6e22e">window-dedicated-p</span> w))
                                    (throw <span style="color:#e6db74">&#39;done</span> <span style="color:#66d9ef">nil</span>)))
                                frame)
              <span style="color:#66d9ef">t</span>)))
         (not (<span style="color:#a6e22e">window-minibuffer-p</span> window))
         (let ((split-height-threshold <span style="color:#ae81ff">0</span>))
           (when (window-splittable-p window)
             <span style="color:#e6db74">&#39;below</span>))))))</code></pre></div>
<h2 id="example">Example</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-emacs" data-lang="emacs">(setq shackle-rules
      <span style="color:#f92672">&#39;</span>((compilation-mode :select <span style="color:#66d9ef">nil</span>)
        (<span style="color:#e6db74">&#34;*undo-tree*&#34;</span> :size <span style="color:#ae81ff">0.25</span> :align my-shackle-sensible-alignment)
        (<span style="color:#e6db74">&#34;*Google Translate*&#34;</span> :size <span style="color:#ae81ff">0.25</span> :align my-shackle-sensible-alignment :select <span style="color:#66d9ef">t</span>)
        (<span style="color:#e6db74">&#34;*Help*&#34;</span> :other <span style="color:#66d9ef">t</span> :select <span style="color:#66d9ef">nil</span> :same <span style="color:#66d9ef">nil</span> :align my-shackle-sensible-alignment :size <span style="color:#ae81ff">0.5</span>)))</code></pre></div>
<h2 id="demonstration">Demonstration</h2>

<p><a href="https://asciinema.org/a/WBfAXNfgSZpjD2GVJiAcEYAlK" target="_blank"><img src="https://asciinema.org/a/WBfAXNfgSZpjD2GVJiAcEYAlK.svg" /></a></p>

    </div>
    <div class="post-footer">
      
    </div>
  </article>

    </main>
  </body>
</html>
