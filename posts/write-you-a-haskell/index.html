<!doctype html>
<html lang="en-us">
  <head>
    <title>Write You A Haskell // Bodacious Blog</title>
    <meta charset="utf-8" />
    <meta name="generator" content="Hugo 0.59.0-DEV" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="author" content="John Doe" />
    <meta name="description" content="" />
    <link rel="stylesheet" href="https://mullikine.github.io/css/main.min.bfa9c7060f6f27290de6ffc084d204f88a8b253d48215ae86ab9400c0c625aa0.css" />

    
    <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Write You A Haskell"/>
<meta name="twitter:description" content="This is just a casual writeup of WYAH as I read through it.
Prereading Glossary monad transformer You have an innermost monad (usually Identity or IO but you can use any monad). You then wrap monad transformers around this monad to make bigger, better monads. https://page.mi.fu-berlin.de/scravy/realworldhaskell/materialien/monad-transformers-step-by-step.pdf It is possible to create custom monads simply by composing the necessary monad transformers. For example, if you need a monad with state and error handling, just take the StateT and ErrorT monad transformers and combine them."/>

    <meta property="og:title" content="Write You A Haskell" />
<meta property="og:description" content="This is just a casual writeup of WYAH as I read through it.
Prereading Glossary monad transformer You have an innermost monad (usually Identity or IO but you can use any monad). You then wrap monad transformers around this monad to make bigger, better monads. https://page.mi.fu-berlin.de/scravy/realworldhaskell/materialien/monad-transformers-step-by-step.pdf It is possible to create custom monads simply by composing the necessary monad transformers. For example, if you need a monad with state and error handling, just take the StateT and ErrorT monad transformers and combine them." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://mullikine.github.io/posts/write-you-a-haskell/" />
<meta property="article:published_time" content="2019-10-25T00:00:00+13:00" />
<meta property="article:modified_time" content="2019-10-25T00:00:00+13:00" /><meta property="og:site_name" content="Bodacious Blog" />


  </head>
  <body>
    <header class="app-header">
      <a href="https://mullikine.github.io"><img class="app-header-avatar" src="http://mullikine.github.io/fievel.png" alt="John Doe" /></a>
      <h1>Bodacious Blog</h1>
      
      <div class="app-header-social">
        
          <a target="_blank" href="https://github.com/mullikine"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-github">
  <title>github</title>
  <path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path>
</svg></a>
        
          <a target="_blank" href="https://linkedin.com/in/shane-mulligan-811b942b/"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-linkedin">
  <title>linkedin</title>
  <path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"></path><rect x="2" y="9" width="4" height="12"></rect><circle cx="4" cy="4" r="2"></circle>
</svg></a>
        
          <a target="_blank" href="https://gitlab.com/mullikine"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-gitlab">
  <title>gitlab</title>
  <path d="M22.65 14.39L12 22.13 1.35 14.39a.84.84 0 0 1-.3-.94l1.22-3.78 2.44-7.51A.42.42 0 0 1 4.82 2a.43.43 0 0 1 .58 0 .42.42 0 0 1 .11.18l2.44 7.49h8.1l2.44-7.51A.42.42 0 0 1 18.6 2a.43.43 0 0 1 .58 0 .42.42 0 0 1 .11.18l2.44 7.51L23 13.45a.84.84 0 0 1-.35.94z"></path>
</svg></a>
        
          <a target="_blank" href="https://twitter.com/mullikine"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-twitter">
  <title>twitter</title>
  <path d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"></path>
</svg></a>
        
        <a href="https://mullikine.github.io/cv/">CV</a>
      </div>
<div class="highlights">
<a href="https://mullikine.github.io/posts/practical-macros-in-racket-and-how-to-work-with-them/">Practical macros in Racket</a>
<br />
<a href="https://mullikine.github.io/posts/github-search-with-bigquery/">Searching GitHub with BigQuery</a>

<br />
<a href="https://mullikine.github.io/posts/arbitrary-interpreters-for-babel/">Arbitrary interpreters for Babel</a>
<br />
<a href="https://mullikine.github.io/posts/review-of-the-illustrated-transformer/">The Illustrated Transformer</a>
<br />
<a href="https://mullikine.github.io/glossary.html">Glossary A-Z (70 topics)</a>
<br />
<a href="https://mullikine.github.io/codelingo-vs-linters/summary/">CodeLingo vs Linters</a>
<br />
<div class="taglist">

<a class="tag" href="https://mullikine.github.io/tags/gpt-2/">GPT-2</a>
<a class="tag" href="https://mullikine.github.io/tags/nlp/">NLP</a>
<a class="tag" href="https://mullikine.github.io/tags/emacs/">emacs</a>
<a class="tag" href="https://mullikine.github.io/tags/elisp/">elisp</a>
<a class="tag" href="https://mullikine.github.io/tags/racket/">racket</a>
<a class="tag" href="https://mullikine.github.io/tags/haskell/">haskell</a>
<a class="tag" href="https://mullikine.github.io/tags/biosemiotics/">biosemiotics</a>
<a class="tag" href="https://mullikine.github.io/tags/ir/">IR</a>
<a class="tag" href="https://mullikine.github.io/tags/games/">games</a>
<a class="tag" href="https://mullikine.github.io/tags/info/">information theory</a>
<a class="tag" href="https://mullikine.github.io/tags/probability/">probability</a>
<a class="tag" href="https://mullikine.github.io/tags/problog/">problog</a>
<a class="tag" href="https://mullikine.github.io/tags/bash/">bash</a>
<a class="tag" href="https://mullikine.github.io/tags/gcp/">GCP</a>
<a class="tag" href="https://mullikine.github.io/tags/github/">github</a>
<a class="tag" href="https://mullikine.github.io/tags/parsers/">parsers</a>
<a class="tag" href="https://mullikine.github.io/tags/rust/">rust</a>
<a class="tag" href="https://mullikine.github.io/tags/cpp/">c++</a>
<a class="tag" href="https://mullikine.github.io/tags/transformer/">transformer</a>
<a class="tag" href="https://mullikine.github.io/tags/kaggle/">kaggle</a>
<a class="tag" href="https://mullikine.github.io/tags/dl/">deep learning</a>
<a class="tag" href="https://mullikine.github.io/tags/dsls/">DSLs</a>
<a class="tag" href="https://mullikine.github.io/tags/df/">dwarf fortress</a>
<a class="tag" href="https://mullikine.github.io/tags/spacy/">spacy</a>
<a class="tag" href="https://mullikine.github.io/tags/latex/">latex</a>
<a class="tag" href="https://mullikine.github.io/tags/graphviz/">graphviz</a>
<a class="tag" href="https://mullikine.github.io/tags/python/">python</a>
<a class="tag" href="https://mullikine.github.io/tags/golang/">golang</a>
<a class="tag" href="https://mullikine.github.io/tags/codelingo/">codelingo</a>
<a class="tag" href="https://mullikine.github.io/tags/math/">math</a>
<a class="tag" href="https://mullikine.github.io/tags/review/">review</a>
<a class="tag" href="https://mullikine.github.io/tags/codegen/">code-gen</a></div>
<a class="tag" href="https://mullikine.github.io/tags/vim/">vim</a>
<a class="tag" href="https://mullikine.github.io/tags/automation/">automation</a></div>
</div>
<div>
    </header>
    <main class="app-container">
      
  <article class="post">
    <header class="post-header">
      <h1 class ="post-title">Write You A Haskell</h1>
      <div class="post-meta">
        <div>
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-calendar">
  <title>calendar</title>
  <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line>
</svg>
          Oct 25, 2019
        </div>
        <div>
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-clock">
  <title>clock</title>
  <circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline>
</svg>
          2 min read
        </div><div>
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tag">
  <title>tag</title>
  <path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7" y2="7"></line>
</svg>
          <a class="tag" href="https://mullikine.github.io/tags/parsers/">parsers</a></div></div>
    </header>
    

<link rel="stylesheet" type="text/css" href="https://mullikine.github.io/css/magit.css"/>

<script src="https://mullikine.github.io/js/mathjax-config.js"></script>
 
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-AMS_HTML"></script>


    <div class="post-content">
      

<p>This is just a casual writeup of <code>WYAH</code> as I read through it.</p>

<h2 id="prereading">Prereading</h2>

<h3 id="glossary">Glossary</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">monad transformer
    You have an innermost monad (usually
    Identity or IO but you can use any monad).

    You then wrap monad transformers around
    this monad to make bigger, better monads.

    https://page.mi.fu-berlin.de/scravy/realworldhaskell/materialien/monad-transformers-step-by-step.pdf

    It is possible to create custom monads
    simply by composing the necessary monad
    transformers. For example, if you need a
    monad with state and error handling, just
    take the StateT and ErrorT monad
    transformers and combine them.

    Concrete example
    - Suppose I was writing a server:
      Each client handling thread must be of
      type IO ()

      That&#39;s because forkIO :: IO () -&gt; IO
      ThreadID).

    Monads are not composable.

    This poses a problem, since composition is
    one of the foremost patterns in functional
    programming.

    However, many alternatives have been
    devised.

    One of the most common is the monad
    transformer.

    Monad transformers allow developers to
    compose the effects of different monads,
    even if the monads themselves are not the
    same.

    An example is writing a do-statement that
    can:
    - abort computation (ExceptT),
    - thread state (StateT), and
    - connect to a database
      (via a Haskell library such as
      persistence or esqueleto).

    The transformers package is used by over
    2,500 packages on Stackage.

    But using monad transformers is a
    challenge for many, even if they are
    already writing useful, effectful,
    production Haskell.</code></pre></div>
<h3 id="familiarise-myself-with-this">Familiarise myself with this</h3>

<p><a href="http://dev.stephendiehl.com/hask/">http://dev.stephendiehl.com/hask/</a></p>

<h4 id="libraries">Libraries</h4>

<table>
<thead>
<tr>
<th>library</th>
<th>description</th>
</tr>
</thead>

<tbody>
<tr>
<td>containers</td>
<td>Core data structures</td>
</tr>

<tr>
<td>unordered-containers</td>
<td>Core data structures</td>
</tr>

<tr>
<td>text</td>
<td>Text datastructure</td>
</tr>

<tr>
<td>bytestring</td>
<td>Text datastructure</td>
</tr>

<tr>
<td>transformers</td>
<td></td>
</tr>

<tr>
<td>mtl</td>
<td></td>
</tr>

<tr>
<td>filepath</td>
<td></td>
</tr>

<tr>
<td>directory</td>
<td></td>
</tr>

<tr>
<td>process</td>
<td></td>
</tr>

<tr>
<td>parsec</td>
<td>Parser combinators</td>
</tr>

<tr>
<td>happy</td>
<td>Parser generator</td>
</tr>

<tr>
<td>alex</td>
<td>Lexer generator</td>
</tr>

<tr>
<td>pretty</td>
<td>Pretty print combinators</td>
</tr>

<tr>
<td>ansi-wl-pprint</td>
<td>Pretty print combinators</td>
</tr>

<tr>
<td>pretty-show</td>
<td>Haskell pretty printer</td>
</tr>

<tr>
<td>graphscc</td>
<td>Topological sorting</td>
</tr>

<tr>
<td>haskeline</td>
<td>GNU Readline integration</td>
</tr>

<tr>
<td>repline</td>
<td>Interactive shell builder</td>
</tr>

<tr>
<td>cereal</td>
<td></td>
</tr>

<tr>
<td>deepseq</td>
<td></td>
</tr>

<tr>
<td>uniqueid</td>
<td></td>
</tr>

<tr>
<td>uniplate</td>
<td></td>
</tr>

<tr>
<td>optparse-applicative</td>
<td>Commandline argument</td>
</tr>

<tr>
<td>hoopl</td>
<td></td>
</tr>

<tr>
<td>fgl</td>
<td></td>
</tr>

<tr>
<td>llvm-general</td>
<td>LLVM Codegen</td>
</tr>

<tr>
<td>smtLib</td>
<td></td>
</tr>

<tr>
<td>sbv</td>
<td></td>
</tr>
</tbody>
</table>

<ul>
<li><p>package: <code>containers</code></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">egr containers haskell example</code></pre></div>
<p><a href="https://haskell-containers.readthedocs.io/en/latest/map.html#short-example">https://haskell-containers.readthedocs.io/en/latest/map.html#short-example</a></p>

<ul>
<li><p>Glossary</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">finite map
dictionary</code></pre></div></li>

<li><p>&ldquo;strict&rdquo; interface for data structures in containers</p>

<p>Finite maps
<a href="http://hackage.haskell.org/package/containers-0.6.2.1/docs/Data-Map-Strict.html">http://hackage.haskell.org/package/containers-0.6.2.1/docs/Data-Map-Strict.html</a></p></li>

<li><p>What&rsquo;s the difference?</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-haskell" data-lang="haskell"><span style="color:#66d9ef">import</span> <span style="color:#66d9ef">qualified</span> Data.Map <span style="color:#66d9ef">as</span> Map
<span style="color:#66d9ef">import</span> <span style="color:#66d9ef">qualified</span> Data.Map.Strict <span style="color:#66d9ef">as</span> Map</code></pre></div>
<p>Finite Maps (strict interface)</p>

<p><a href="http://hackage.haskell.org/package/containers-0.6.2.1/docs/Data-Map-Strict.html">http://hackage.haskell.org/package/containers-0.6.2.1/docs/Data-Map-Strict.html</a></p>

<p><a href="https://haskell-containers.readthedocs.io/en/latest/">https://haskell-containers.readthedocs.io/en/latest/</a></p>

<p><a href="https://haskell-containers.readthedocs.io/en/latest/map.html#short-example">https://haskell-containers.readthedocs.io/en/latest/map.html#short-example</a></p></li>

<li><p>Why did this fail?</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-haskell" data-lang="haskell"><span style="color:#66d9ef">let</span> m1 <span style="color:#f92672">=</span> <span style="color:#66d9ef">Map</span><span style="color:#f92672">.</span>fromList [(<span style="color:#e6db74">&#34;a&#34;</span>, <span style="color:#ae81ff">1</span>), (<span style="color:#e6db74">&#34;b&#34;</span>, <span style="color:#ae81ff">2</span>)]
<span style="color:#66d9ef">let</span> m2 <span style="color:#f92672">=</span> <span style="color:#66d9ef">Map</span><span style="color:#f92672">.</span>delete <span style="color:#e6db74">&#34;a&#34;</span> m1
<span style="color:#a6e22e">print</span> m1
<span style="color:#a6e22e">print</span> m2</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-haskell" data-lang="haskell"><span style="color:#f92672">&lt;</span>interactive<span style="color:#f92672">&gt;:</span><span style="color:#ae81ff">5</span><span style="color:#66d9ef">:</span><span style="color:#ae81ff">7</span><span style="color:#66d9ef">:</span> <span style="color:#a6e22e">error</span><span style="color:#66d9ef">:</span> <span style="color:#66d9ef">Variable</span> not <span style="color:#66d9ef">in</span> scope<span style="color:#66d9ef">:</span> m2 <span style="color:#f92672">::</span> ()</code></pre></div></li>

<li><p>Try again</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-haskell" data-lang="haskell"><span style="color:#66d9ef">import</span> <span style="color:#66d9ef">qualified</span> Data.Map.Strict <span style="color:#66d9ef">as</span> Map

<span style="color:#a6e22e">m1</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">Map</span><span style="color:#f92672">.</span>fromList [(<span style="color:#e6db74">&#34;a&#34;</span>, <span style="color:#ae81ff">1</span>), (<span style="color:#e6db74">&#34;b&#34;</span>, <span style="color:#ae81ff">2</span>)]
<span style="color:#a6e22e">m2</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">Map</span><span style="color:#f92672">.</span>delete <span style="color:#e6db74">&#34;a&#34;</span> m1
<span style="color:#a6e22e">print</span> m1
<span style="color:#a6e22e">print</span> m2</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-haskell" data-lang="haskell"><span style="color:#a6e22e">fromList</span> [(<span style="color:#e6db74">&#34;b&#34;</span>,<span style="color:#ae81ff">2</span>)]</code></pre></div></li>
</ul></li>
</ul>

    </div>
    <div class="post-footer">
      
    </div>
  </article>

    </main>
  </body>
</html>